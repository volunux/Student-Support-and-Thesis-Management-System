(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"9Xeq":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("Yvf7"),r=n("Ub9n");let s=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[i.b]]}),e})()},AuHR:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("OX4D");function r(e=-1){return t=>t.lift(new s(e,t))}class s{constructor(e,t){this.count=e,this.source=t}call(e,t){return t.subscribe(new a(e,this.count,this.source))}}class a extends i.a{constructor(e,t,n){super(e),this.count=t,this.source=n}error(e){if(!this.isStopped){const{source:t,count:n}=this;if(0===n)return super.error(e);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}}}},jiyY:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("Ub9n"),r=n("9Ku7"),s=n("Fk62");let a=(()=>{class e{constructor(e,t){this.aus=e,this.router=t}canActivate(e,t){return this.verifyLogin(t.url)}canActivateChild(e,t){return this.canActivate(e,t)}canLoad(e){return this.verifyLogin(e.path)}verifyLogin(e){return!!this.aus.isLoggedIn()||(this.aus.redirectAddress=e,this.router.parseUrl("/signin"))}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(r.a),i.Tb(s.d))},e.\u0275prov=i.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},uEry:function(e,t,n){"use strict";n.r(t),n.d(t,"GeneralPaymentModule",function(){return Tn});var i=n("Yvf7"),r=n("8VHZ"),s=n("hxwH"),a=n("O/oE"),c=n("9Xeq"),o=n("kPid"),l=n("Fk62"),b=n("jiyY"),u=n("iojP"),p=n("/zEo"),y=n("J1Ni"),h=n("Ub9n");let g=(()=>{class e{constructor(){}ngOnInit(){}getAnimationData(e){return e&&e.activatedRouteData&&e.activatedRouteData.animation}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Eb({type:e,selectors:[["app-gp-homepage"]],decls:1,vars:0,template:function(e,t){1&e&&h.Lb(0,"router-outlet")},directives:[l.h],styles:[""],data:{animation:[y.d]}}),e})();var m=n("EUGn"),f=n("jV/k"),d=n("vfyW"),v=n("XRyL"),P=n("oECA"),O=n("O6Zd"),z=n("AuHR"),I=n("VcWf"),E=n("FBrc");let $=(()=>{class e{constructor(e,t,n){this.http=e,this.apiConfig=t,this.ems=n,this.$systemType="General Payment",this.$sa="general-payment"}managePayment(){return this.http.get(`${this.apiConfig.host}/${this.$sa}/manage`).pipe(Object(d.a)(e=>console.log(e)),Object(v.a)(3e3),Object(P.a)(this.handleError("Payment Type Entries",null)))}managePaymentEntry(e){return this.http.get(`${this.apiConfig.host}/${this.$sa}/manage/t/${e}`).pipe(Object(d.a)(e=>console.log(e)),Object(v.a)(3e3),Object(P.a)(this.handleError("Payment Type Entry",null)))}getAllEntry(e){return this.http.get(`${this.apiConfig.host}/${this.$sa}/t/${this.ptype}/entries`,{params:e}).pipe(Object(d.a)(e=>console.log(e)),Object(v.a)(3e3),Object(P.a)(this.handleError(this.$systemType+" Entries",null)))}getEntry(e,t){return this.http.get(`${this.apiConfig.host}/${this.$sa}/t/${e}/entry/${t}/detail`).pipe(Object(d.a)(e=>console.log(e)),Object(v.a)(3e3),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}getStatus(){return this.http.get(`${this.apiConfig.host}/${this.$sa}/transaction-status`).pipe(Object(d.a)(e=>console.log(e)),Object(v.a)(3e3),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}confirmStatus(e){return this.http.post(`${this.apiConfig.host}/${this.$sa}/transaction-status`,e).pipe(Object(d.a)(e=>console.log(e)),Object(v.a)(3e3),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}addEntry(e){return this.http.get(`${this.apiConfig.host}/${this.$sa}/t/${e}/entry/create`).pipe(Object(d.a)(e=>console.log(e)),Object(v.a)(3e3),Object(O.a)(e=>({permitted:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}addEntry$(e,t){return this.http.post(`${this.apiConfig.host}/${this.$sa}/t/${e}/entry/create`,t).pipe(Object(d.a)(e=>console.log(e)),Object(O.a)(e=>({created:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}checkPayment(e,t){return this.http.post(`${this.apiConfig.host}/${this.$sa}/t/${e}/entry/create`,t).pipe(Object(d.a)(e=>console.log(e)),Object(v.a)(3e3),Object(O.a)(e=>({permitted:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}$initializePayment(e){return this.http.post(this.apiConfig.host+"/general-payment/initialize-transaction",e).pipe(Object(d.a)(e=>console.log(e)),Object(z.a)(3),Object(O.a)(e=>({created:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}$verifyPayment(e){return this.http.get(`${this.apiConfig.host}/general-payment/verify-transaction?reference=${e}`).pipe(Object(d.a)(e=>console.log(e)),Object(O.a)(e=>({verified:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}$refundEntry(e,t){return this.http.post(`${this.apiConfig.host}/general-payment/refund-transaction?reference=${e}`,t).pipe(Object(d.a)(e=>console.log(e)),Object(O.a)(e=>({created:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}$createRefund(e,t){return this.http.put(`${this.apiConfig.host}/${this.$sa}/entry/${e}/refund`,t).pipe(Object(d.a)(e=>console.log(e)),Object(O.a)(e=>({updated:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}updateEntry$(e,t,n){return this.http.put(`${this.apiConfig.host}/${this.$sa}/t/${e}/entry/${t}/detail`,n).pipe(Object(O.a)(e=>({updated:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}deleteManyEntry$(e,t){return this.http.patch(`${this.apiConfig.host}/${this.$sa}/t/${this.ptype}/delete/entry/many`,{entries:t}).pipe(Object(O.a)(e=>({manyDeleted:!0})),Object(P.a)(this.handleError(this.$systemType+" Entries Delete",null)))}deleteAllEntry(e){return this.http.get(`${this.apiConfig.host}/${this.$sa}/t/${e}/delete/entry/all/`).pipe(Object(v.a)(3e3),Object(P.a)(this.handleError(this.$systemType+" Entry or Entries Delete",null)))}deleteAllEntry$(e){return this.http.delete(`${this.apiConfig.host}/${this.$sa}/t/$ptype/delete/entry/all/`).pipe(Object(O.a)(e=>({allDeleted:!0})),Object(P.a)(this.handleError(this.$systemType+" Entry or Entries Delete",null)))}handleError(e="operation",t){return e=>(this.ems.message=e,Object(f.a)(t))}}return e.\u0275fac=function(t){return new(t||e)(h.Tb(E.b),h.Tb(I.b),h.Tb(m.a))},e.\u0275prov=h.Gb({token:e,factory:e.\u0275fac}),e})();var x=n("9Ku7"),L=n("uMT1"),w=n("+ef2"),T=n("TY4h");function N(e,t){if(1&e&&(h.Pb(0,"h2"),h.xc(1),h.Ob()),2&e){const e=h.ac();h.zb(1),h.yc(" ",e.title," ")}}function k(e,t){if(1&e&&h.Lb(0,"app-view-description",5),2&e){const e=h.ac();h.gc("system-type",e.systemType)("view-type",e.view)}}function j(e,t){if(1&e&&h.Lb(0,"app-resource-unavailable",6),2&e){const e=h.ac();h.gc("error",e.error)}}const _=function(e){return["./","t",e]};function F(e,t){if(1&e&&(h.Pb(0,"li"),h.Pb(1,"a",9),h.xc(2),h.Ob(),h.Ob()),2&e){const e=t.$implicit;h.zb(1),h.gc("routerLink",h.lc(2,_,null==e?null:e.slug)),h.zb(1),h.yc(" ",null==e?null:e.name," ")}}const A=function(){return["./","verify-status"]};function S(e,t){1&e&&(h.Pb(0,"li"),h.Pb(1,"a",9),h.xc(2," Verify Payment Status "),h.Ob(),h.Ob()),2&e&&(h.zb(1),h.gc("routerLink",h.kc(1,A)))}const M=function(){return["/account","profile"]};function C(e,t){if(1&e&&(h.Pb(0,"ul"),h.vc(1,F,3,4,"li",8),h.vc(2,S,3,2,"li",0),h.Pb(3,"li"),h.Pb(4,"a",9),h.xc(5," Profile "),h.Ob(),h.Ob(),h.Ob()),2&e){const e=h.ac(2);h.gc("@listAnimation",e.entries.length),h.zb(1),h.gc("ngForOf",e.entries),h.zb(1),h.gc("ngIf",e.canVerify),h.zb(2),h.gc("routerLink",h.kc(4,M))}}function D(e,t){if(1&e&&(h.Pb(0,"div",7),h.vc(1,C,6,5,"ul",0),h.Ob()),2&e){const e=h.ac();h.zb(1),h.gc("ngIf",null!=e.entries&&e.entries.length>0)}}let K=(()=>{class e{constructor(e,t,n,i){this.route=e,this.gps=t,this.ems=n,this.aus=i,this.isError=!1,this.isLoading=!1}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.dashboard.systemType,this.title=e.dashboard.title,this.view=e.dashboard.view,this.isLoading=!0,this.gps.managePayment().subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&e.length>0&&(this.isLoading=!1,this.entries=e)})}get canVerify(){return["student","departmentPresident","facultyPresident"].indexOf(this.aus.userRole)<0}}return e.\u0275fac=function(t){return new(t||e)(h.Kb(l.a),h.Kb($),h.Kb(m.a),h.Kb(x.a))},e.\u0275cmp=h.Eb({type:e,selectors:[["app-gp-dashboard"]],features:[h.yb([m.a])],decls:5,vars:5,consts:[[4,"ngIf"],[3,"system-type","view-type",4,"ngIf"],[3,"error",4,"ngIf"],["id","dashboard",4,"ngIf"],[3,"is-loading"],[3,"system-type","view-type"],[3,"error"],["id","dashboard"],[4,"ngFor","ngForOf"],[1,"center",3,"routerLink"]],template:function(e,t){1&e&&(h.vc(0,N,2,1,"h2",0),h.vc(1,k,1,2,"app-view-description",1),h.vc(2,j,1,1,"app-resource-unavailable",2),h.vc(3,D,2,1,"div",3),h.Lb(4,"app-loading-menu",4)),2&e&&(h.gc("ngIf",t.title),h.zb(1),h.gc("ngIf",t.view),h.zb(1),h.gc("ngIf",t.isError),h.zb(1),h.gc("ngIf",t.systemType),h.zb(1),h.gc("is-loading",t.isLoading))},directives:[i.l,L.a,w.a,T.a,i.k,l.f],styles:[""],data:{animation:[y.c]}}),e})();var q=n("XA6Z"),R=n("vlQ6");function W(e,t){if(1&e&&(h.Pb(0,"h2"),h.xc(1),h.Ob()),2&e){const e=h.ac();h.zb(1),h.yc(" ",e.entry.name," Payment ")}}function V(e,t){if(1&e&&h.Lb(0,"app-view-description",5),2&e){const e=h.ac();h.gc("system-type",e.systemType)("view-type",e.view)}}function G(e,t){if(1&e&&h.Lb(0,"app-resource-unavailable",6),2&e){const e=h.ac();h.gc("error",e.error)}}const Q=function(){return["entry","create"]};function B(e,t){if(1&e&&(h.Pb(0,"li"),h.Pb(1,"a",8),h.xc(2),h.Ob(),h.Ob()),2&e){const e=h.ac(2);h.zb(1),h.gc("routerLink",h.kc(2,Q)),h.zb(1),h.yc(" Create ",e.entry.name," Entry ")}}const U=function(){return["entry","delete","all"]};function Y(e,t){if(1&e&&(h.Pb(0,"li"),h.Pb(1,"a",8),h.xc(2),h.Ob(),h.Ob()),2&e){const e=h.ac(2);h.zb(1),h.gc("routerLink",h.kc(2,U)),h.zb(1),h.yc(" Delete All ",e.entry.name," Entry ")}}const H=function(){return["entries"]},X=function(){return["../../"]},J=function(){return["/account","profile"]};function Z(e,t){if(1&e&&(h.Pb(0,"div",7),h.Pb(1,"ul"),h.Pb(2,"li"),h.Pb(3,"a",8),h.xc(4),h.Ob(),h.Ob(),h.vc(5,B,3,3,"li",0),h.Pb(6,"li"),h.Pb(7,"a",8),h.xc(8," Other Payments "),h.Ob(),h.Ob(),h.vc(9,Y,3,3,"li",0),h.Pb(10,"li"),h.Pb(11,"a",8),h.xc(12," Profile "),h.Ob(),h.Ob(),h.Ob(),h.Ob()),2&e){const e=h.ac();h.gc("@fadeAnimation",void 0),h.zb(3),h.gc("routerLink",h.kc(7,H)),h.zb(1),h.yc(" Manage ",e.entry.name," Entry "),h.zb(1),h.gc("ngIf",e.canCreate),h.zb(2),h.gc("routerLink",h.kc(8,X)),h.zb(2),h.gc("ngIf",e.canDeleteAll),h.zb(2),h.gc("routerLink",h.kc(9,J))}}let ee=(()=>{class e{constructor(e,t,n,i,r){this.route=e,this.ts=t,this.gps=n,this.ems=i,this.aus=r,this.isError=!1,this.isLoading=!1}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.dashboard.systemType,this.title=e.dashboard.title,this.view=e.dashboard.view,this.link=e.dashboard.link,this.gps.$systemType=this.systemType,this.route.paramMap.pipe(Object(q.a)(e=>{let t=e.get("payment");return this.pslug=t,this.isLoading=!0,this.gps.managePaymentEntry(t)})).subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&(this.isLoading=!1,this.entry=e,this.ts.setTitle(e.name+" Payment"))})}get canCreate(){return["student","departmentPresident","facultyPresident"].indexOf(this.aus.userRole)>-1}get canDeleteAll(){return this.aus.isSuperAdministrator}}return e.\u0275fac=function(t){return new(t||e)(h.Kb(l.a),h.Kb(R.b),h.Kb($),h.Kb(m.a),h.Kb(x.a))},e.\u0275cmp=h.Eb({type:e,selectors:[["app-gp-entry-dashboard"]],features:[h.yb([m.a])],decls:5,vars:5,consts:[[4,"ngIf"],[3,"system-type","view-type",4,"ngIf"],[3,"error",4,"ngIf"],["id","dashboard",4,"ngIf"],[3,"is-loading"],[3,"system-type","view-type"],[3,"error"],["id","dashboard"],[1,"center",3,"routerLink"]],template:function(e,t){1&e&&(h.vc(0,W,2,1,"h2",0),h.vc(1,V,1,2,"app-view-description",1),h.vc(2,G,1,1,"app-resource-unavailable",2),h.vc(3,Z,13,10,"div",3),h.Lb(4,"app-loading-menu",4)),2&e&&(h.gc("ngIf",t.entry&&(null==t.entry?null:t.entry.name)),h.zb(1),h.gc("ngIf",t.view),h.zb(1),h.gc("ngIf",t.isError),h.zb(1),h.gc("ngIf",t.entry),h.zb(1),h.gc("is-loading",t.isLoading))},directives:[i.l,L.a,w.a,T.a,l.f],styles:[""],data:{animation:[y.a]}}),e})();var te=n("iPJu"),ne=n("BeQt"),ie=n("9nlD");const re=["staff","moderator","administrator","superAdministrator"];var se=n("Rxsk"),ae=n("9yhg"),ce=n("xlhj"),oe=n("scZC");function le(e,t){if(1&e&&(h.Pb(0,"h2"),h.xc(1),h.Ob()),2&e){const e=h.ac();h.zb(1),h.yc(" ",e.title,"")}}function be(e,t){if(1&e&&h.Lb(0,"app-view-description",9),2&e){const e=h.ac();h.gc("system-type",e.systemType)("view-type",e.view)}}function ue(e,t){if(1&e){const e=h.Qb();h.Pb(0,"app-notification-screen",10),h.Wb("finished",function(){return h.rc(e),h.ac().removeNotification()}),h.Ob()}if(2&e){const e=h.ac();h.gc("notified",e.notificationAvailable)("message",e.notificationMessage)}}function pe(e,t){1&e&&h.Lb(0,"app-list-entry-options")}function ye(e,t){if(1&e&&h.Lb(0,"app-search",11),2&e){const e=h.ac();h.gc("system-type",e.systemType)("$link",e.$link)("search-filters",e.searchFilters)}}function he(e,t){1&e&&(h.Pb(0,"td",25),h.xc(1," Nil "),h.Ob())}function ge(e,t){if(1&e&&(h.Pb(0,"td",33),h.xc(1),h.Ob()),2&e){const e=h.ac().$implicit;h.zb(1),h.yc(" ",null==e?null:e.payment_reference," ")}}function me(e,t){if(1&e&&(h.Pb(0,"td",25),h.xc(1),h.Ob()),2&e){const e=h.ac().$implicit;h.zb(1),h.yc(" ",null==e?null:e.full_name," ")}}function fe(e,t){if(1&e&&(h.Pb(0,"td",25),h.xc(1),h.Ob()),2&e){const e=h.ac().$implicit;h.zb(1),h.yc(" ",null==e?null:e.payment_session," ")}}function de(e,t){if(1&e&&(h.Pb(0,"td",25),h.xc(1),h.Ob()),2&e){const e=h.ac().$implicit;h.zb(1),h.yc(" ",null==e?null:e.department," ")}}function ve(e,t){if(1&e&&(h.Pb(0,"td",25),h.xc(1),h.bc(2,"date"),h.Ob()),2&e){const e=h.ac().$implicit;h.zb(1),h.yc(" ",h.dc(2,1,null==e?null:e.paid_on,"longDate")," ")}}const Pe=function(){return{}};function Oe(e,t){if(1&e&&(h.Pb(0,"td",34),h.xc(1),h.Ob()),2&e){const e=h.ac().$implicit;h.gc("ngClass",h.kc(2,Pe)),h.zb(1),h.yc(" ",null==e?null:e.status," ")}}function ze(e,t){if(1&e){const e=h.Qb();h.Nb(0),h.Pb(1,"input",39,40),h.Wb("click",function(){h.rc(e);const t=h.qc(2),n=h.ac(3),i=n.$implicit,r=n.index;return h.ac(2).addEntryToDeleteList(null==i?null:i.num,t.checked,r)}),h.Ob(),h.Lb(3,"span",41),h.Mb()}if(2&e){const e=t.$implicit,n=h.ac(3).$implicit;h.zb(1),h.gc("checked",e==(null==n?null:n.num))}}function Ie(e,t){if(1&e&&(h.Nb(0),h.vc(1,ze,4,1,"ng-container",38),h.Mb()),2&e){const e=h.ac(4);h.zb(1),h.gc("ngForOf",e.esdl)}}function Ee(e,t){if(1&e){const e=h.Qb();h.Pb(0,"input",42,40),h.Wb("click",function(){h.rc(e);const t=h.qc(1),n=h.ac(2),i=n.$implicit,r=n.index;return h.ac(2).addEntryToDeleteList(null==i?null:i.num,t.checked,r)}),h.Ob(),h.Lb(2,"span",41)}}function $e(e,t){if(1&e&&(h.Pb(0,"label",35),h.vc(1,Ie,2,1,"ng-container",36),h.vc(2,Ee,3,0,"ng-template",null,37,h.wc),h.Ob()),2&e){const e=h.qc(3),t=h.ac(3);h.zb(1),h.gc("ngIf",t.esdl.length)("ngIfElse",e)}}const xe=function(e){return["../","entry",e,"detail"]};function Le(e,t){if(1&e&&(h.Pb(0,"tr"),h.Pb(1,"td",25),h.xc(2),h.Ob(),h.vc(3,he,2,0,"ng-template",null,26,h.wc),h.vc(5,ge,2,1,"td",27),h.vc(6,me,2,1,"td",28),h.vc(7,fe,2,1,"td",28),h.vc(8,de,2,1,"td",28),h.vc(9,ve,3,4,"td",28),h.vc(10,Oe,2,3,"td",29),h.Pb(11,"td",30),h.Pb(12,"a",31),h.xc(13," View "),h.Ob(),h.vc(14,$e,4,2,"label",32),h.Ob(),h.Ob()),2&e){const e=t.$implicit,n=t.index,i=h.qc(4),r=h.ac(2);h.zb(2),h.yc(" ",n+1,". "),h.zb(3),h.gc("ngIf",null==e?null:e.payment_reference)("ngIfElse",i),h.zb(1),h.gc("ngIf",null==e?null:e.full_name)("ngIfElse",i),h.zb(1),h.gc("ngIf",null==e?null:e.payment_session)("ngIfElse",i),h.zb(1),h.gc("ngIf",null==e?null:e.department)("ngIfElse",i),h.zb(1),h.gc("ngIf",null==e?null:e.paid_on)("ngIfElse",i),h.zb(1),h.gc("ngIf",null==e?null:e.status)("ngIfElse",i),h.zb(2),h.gc("routerLink",h.lc(15,xe,null==e?null:e.slug)),h.zb(2),h.gc("ngIf",r.canUpdateEntry)}}function we(e,t){if(1&e&&h.Lb(0,"app-pagination",43),2&e){const e=h.ac(2);h.gc("entries-length",e.$entriesLength)("entry-ref",e.$entryRef)("page-number",e.pageNumber)}}function Te(e,t){if(1&e&&(h.Pb(0,"div"),h.Pb(1,"table",12),h.Pb(2,"caption",13),h.xc(3," Entries "),h.Ob(),h.Pb(4,"colgroup"),h.Lb(5,"col",14),h.Lb(6,"col",15),h.Lb(7,"col",16),h.Lb(8,"col",17),h.Lb(9,"col",18),h.Lb(10,"col",19),h.Lb(11,"col",20),h.Lb(12,"col",21),h.Ob(),h.Pb(13,"thead"),h.Pb(14,"tr"),h.Pb(15,"th",22),h.xc(16," Index "),h.Ob(),h.Pb(17,"th",22),h.xc(18," Payment Reference No. "),h.Ob(),h.Pb(19,"th",22),h.xc(20," Full Name "),h.Ob(),h.Pb(21,"th",22),h.xc(22," Session "),h.Ob(),h.Pb(23,"th",22),h.xc(24," Department "),h.Ob(),h.Pb(25,"th",22),h.xc(26," Paid On "),h.Ob(),h.Pb(27,"th",22),h.xc(28," Status "),h.Ob(),h.Pb(29,"th",22),h.xc(30," Changes "),h.Ob(),h.Ob(),h.Ob(),h.Pb(31,"tbody"),h.vc(32,Le,15,17,"tr",23),h.Ob(),h.Pb(33,"tfoot"),h.Pb(34,"tr"),h.Lb(35,"td"),h.Ob(),h.Pb(36,"tr"),h.Lb(37,"td"),h.Ob(),h.Pb(38,"tr"),h.vc(39,we,1,3,"app-pagination",24),h.Ob(),h.Ob(),h.Ob(),h.Ob()),2&e){const e=h.ac();h.zb(31),h.gc("@listAnimation",e.entries.length),h.zb(1),h.gc("ngForOf",e.entries)("ngForTrackBy",e.trackByPaymentRef),h.zb(7),h.gc("ngIf",e.pageNumber)}}function Ne(e,t){if(1&e&&h.Lb(0,"app-resource-unavailable",44),2&e){const e=h.ac();h.gc("error",e.error)}}let ke=(()=>{class e{constructor(e,t,n,i,r,s,a,c){this.route=e,this.location=t,this.gps=n,this.gss=i,this.gas=r,this.ems=s,this.ns=a,this.aus=c,this.entries=[],this.isError=!1,this.esdl=[],this.p$esdl=!1,this.pageNumber=1,this.$entriesLength=0,this.isLoading=!1,this.entriesSearchedOb=this.gss.entriesSearched$.subscribe(e=>{this.location.replaceState(`/general-payment/t/${this.pslug}/entries`),this.pageNumber=1,null==e?(this.entries=[],this.$entriesLength=0,this.error=Object.assign({resource:this.systemType+" Entry or Entries"},this.ems.message),this.isError=!0):null!=e&&e.length>0&&(this.error=null,this.isError=!1,this.$entriesLength=e.length,this.entries=e,this.entries.length<=10&&(this.pageNumber=1),this.entries.length>10&&this.entries.pop())}),this.clearSearchOb=this.gss.clearSearch$.subscribe(e=>{this.clearSearch$()}),this.errorExistOb=this.gss.errorExist$.subscribe(e=>{this.isError=e})}searchErr$(e){this.error=null,this.isError=!1}clearSearch$(){this.error=null,this.isError=!1,this.pageNumber=1,this.location.replaceState(`/general-payment/t/${this.pslug}/entries`),this.gss.searchCleared.next(!0),this.getAllEntry({})}trackByPaymentRef(e,t){return t.payment_reference}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.entries.systemType,this.title=e.entries.title,this.view=e.entries.view,this.link=e.entries.link,this.searchFilters=e.entries.searchFilters,this.gps.$systemType=this.systemType,this.route.queryParamMap.subscribe(e=>{let t=this.route.snapshot.paramMap,n=this.gas.paramProcessor(e,this);return this.pslug=t.get("payment"),this.$link="general-payment/t/"+this.pslug,this.gps.ptype=this.pslug,this.isLoading=!0,this.getAllEntry(n)})}ngOnDestroy(){null!=this.entriesSearchedOb&&this.entriesSearchedOb.unsubscribe(),null!=this.clearSearchOb&&this.clearSearchOb.unsubscribe(),null!=this.errorExistOb&&this.errorExistOb.unsubscribe()}getAllEntry(e){this.gps.getAllEntry(e).subscribe(e=>{null==e?(this.isLoading=!1,this.entries=[],this.$entriesLength=0,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry or Entries"},this.ems.message)):null!=e&&e.length>0&&(this.isLoading=!1,this.error=null,this.isError=!1,this.$entriesLength=e.length,this.entries=e),this.entries.length>10&&this.entries.pop()})}addEntryToDeleteList(e,t,n){this.gas.addEntryToDeleteList(e,t,n,this)}deleteManyEntry(){this.gas.deleteManyEntry(this,this.gps)}get userRole(){return this.aus.userRole}get canUpdateEntry(){return re.indexOf(this.userRole)>-1}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}removeNotification(){this.ns.removeNotification()}}return e.\u0275fac=function(t){return new(t||e)(h.Kb(l.a),h.Kb(i.h),h.Kb($),h.Kb(te.a),h.Kb(ne.a),h.Kb(m.a),h.Kb(ie.a),h.Kb(x.a))},e.\u0275cmp=h.Eb({type:e,selectors:[["app-gp-entries"]],features:[h.yb([ie.a,m.a,te.a,ne.a])],decls:12,vars:10,consts:[["id","entry-main"],[4,"ngIf"],[3,"system-type","view-type",4,"ngIf"],[3,"notified","message","finished",4,"ngIf"],[1,"search-bar"],[3,"system-type","$link","search-filters",4,"ngIf"],[1,"entry-option","entry-option-small","center",3,"click"],[3,"error",4,"ngIf"],[3,"is-loading"],[3,"system-type","view-type"],[3,"notified","message","finished"],[3,"system-type","$link","search-filters"],[1,"entries"],[1,"bold","left"],[1,"index"],[1,"payment-reference"],[1,"full-name"],[1,"amount"],[1,"fee-department"],[1,"paid-on"],[1,"status"],[1,"changes"],[1,"bold","center"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"entries-length","entry-ref","page-number",4,"ngIf"],[1,"center"],["nilValue",""],["class","center bold payment-ref",4,"ngIf","ngIfElse"],["class","center",4,"ngIf","ngIfElse"],["class","center",3,"ngClass",4,"ngIf","ngIfElse"],[1,""],[1,"center","changes-option","changes-option-full",3,"routerLink"],["class","changes-mark",4,"ngIf"],[1,"center","bold","payment-ref"],[1,"center",3,"ngClass"],[1,"changes-mark"],[4,"ngIf","ngIfElse"],["normalChecks",""],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","click"],["checked",""],[1,"checkmark"],["type","checkbox",3,"click"],[3,"entries-length","entry-ref","page-number"],[3,"error"]],template:function(e,t){1&e&&(h.Pb(0,"div",0),h.vc(1,le,2,1,"h2",1),h.vc(2,be,1,2,"app-view-description",2),h.vc(3,ue,1,2,"app-notification-screen",3),h.vc(4,pe,1,0,"app-list-entry-options",1),h.Pb(5,"div",4),h.vc(6,ye,1,3,"app-search",5),h.Pb(7,"a",6),h.Wb("click",function(){return t.deleteManyEntry()}),h.xc(8," Delete Many "),h.Ob(),h.Ob(),h.vc(9,Te,40,4,"div",1),h.vc(10,Ne,1,1,"app-resource-unavailable",7),h.Ob(),h.Lb(11,"app-loading-menu",8)),2&e&&(h.zb(1),h.gc("ngIf",t.title),h.zb(1),h.gc("ngIf",t.view),h.zb(1),h.gc("ngIf",t.notificationAvailable),h.zb(1),h.gc("ngIf",t.$entriesLength>0),h.zb(2),h.gc("ngIf",t.systemType),h.zb(1),h.Cb("hide",t.esdl.length<2),h.zb(2),h.gc("ngIf",t.$entriesLength>0),h.zb(1),h.gc("ngIf",t.isError),h.zb(1),h.gc("is-loading",t.isLoading))},directives:[i.l,L.a,w.a,se.a,ae.a,ce.a,i.k,l.f,i.j,oe.a,T.a],pipes:[i.d],styles:[""],data:{animation:[y.c]}}),e})();function je(e,t){if(1&e&&(h.Pb(0,"h2"),h.xc(1),h.Ob()),2&e){const e=h.ac();h.zb(1),h.yc(" ",e.title," Detail ")}}function _e(e,t){if(1&e&&h.Lb(0,"app-view-description",7),2&e){const e=h.ac();h.gc("view-type",e.view)("system-type",e.systemType)}}function Fe(e,t){if(1&e&&h.Lb(0,"app-resource-unavailable",8),2&e){const e=h.ac();h.gc("error",e.error)}}function Ae(e,t){if(1&e){const e=h.Qb();h.Pb(0,"app-notification-screen",9),h.Wb("finished",function(){return h.rc(e),h.ac().removeNotification()}),h.Ob()}if(2&e){const e=h.ac();h.gc("notified",e.notificationAvailable)("message",e.notificationMessage)}}function Se(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Reference Number : "),h.Ob(),h.Pb(4,"td"),h.Pb(5,"b",15),h.xc(6),h.Ob(),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(6),h.yc(" ",null==e.entry?null:e.entry.payment_reference," ")}}function Me(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Paid Date : "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.bc(6,"date"),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",h.dc(6,1,null==e.entry?null:e.entry.paid_on,"fullDate")," ")}}function Ce(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Amount "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" N = ",null==e.entry?null:e.entry.amount," ")}}function De(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Name "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",null==e.entry?null:e.entry.full_name," ")}}function Ke(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Email Address "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",null==e.entry?null:e.entry.email_address," ")}}function qe(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Phone Number "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",null==e.entry?null:e.entry.phone_number," ")}}function Re(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Payment Description "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",null==e.entry?null:e.entry.description," ")}}function We(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Full Name : "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",null==e.entry||null==e.entry.author?null:e.entry.author.full_name," ")}}function Ve(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Matriculation Number : "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",null==e.entry||null==e.entry.author?null:e.entry.author.matriculation_number," ")}}function Ge(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Identification Number : "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",null==e.entry||null==e.entry.author?null:e.entry.author.identity_number," ")}}function Qe(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Department "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",null==e.entry?null:e.entry.department_name," ")}}function Be(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Faculty "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",null==e.entry?null:e.entry.faculty_name," ")}}function Ue(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Level : "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",null==e.entry||null==e.entry.author?null:e.entry.author.level," ")}}function Ye(e,t){if(1&e&&(h.Nb(0),h.Pb(1,"tr"),h.Pb(2,"th",14),h.xc(3," Status : "),h.Ob(),h.Pb(4,"td"),h.xc(5),h.bc(6,"titlecase"),h.Ob(),h.Ob(),h.Mb()),2&e){const e=h.ac(2);h.zb(5),h.yc(" ",h.cc(6,1,null==e.entry?null:e.entry.status)," ")}}function He(e,t){1&e&&(h.Nb(0),h.Pb(1,"td",12),h.Pb(2,"button",16),h.xc(3," Print "),h.Ob(),h.Ob(),h.Mb())}function Xe(e,t){if(1&e){const e=h.Qb();h.Nb(0),h.Pb(1,"tfoot",17),h.Pb(2,"td",12),h.Pb(3,"button",18),h.Wb("click",function(){return h.rc(e),h.ac(2).refundEntry()}),h.xc(4," Refund "),h.Ob(),h.Ob(),h.Ob(),h.Mb()}}function Je(e,t){if(1&e){const e=h.Qb();h.Nb(0),h.Pb(1,"tfoot",17),h.Pb(2,"td",12),h.Pb(3,"button",18),h.Wb("click",function(){return h.rc(e),h.ac(2).refundEntry()}),h.xc(4," Refund "),h.Ob(),h.Ob(),h.Ob(),h.Mb()}}function Ze(e,t){if(1&e&&(h.Pb(0,"div",10),h.Pb(1,"table"),h.Pb(2,"colgroup"),h.Lb(3,"col",11),h.Lb(4,"col"),h.Ob(),h.Pb(5,"tbody"),h.vc(6,Se,7,1,"ng-container",1),h.vc(7,Me,7,4,"ng-container",1),h.vc(8,Ce,6,1,"ng-container",1),h.Pb(9,"tr"),h.Pb(10,"th",12),h.Pb(11,"h3",13),h.xc(12," Payer Detail "),h.Ob(),h.Lb(13,"hr"),h.Ob(),h.Ob(),h.vc(14,De,6,1,"ng-container",1),h.vc(15,Ke,6,1,"ng-container",1),h.vc(16,qe,6,1,"ng-container",1),h.vc(17,Re,6,1,"ng-container",1),h.Pb(18,"tr"),h.Pb(19,"th",12),h.Pb(20,"h3",13),h.xc(21," Student Detail "),h.Ob(),h.Lb(22,"hr"),h.Ob(),h.Ob(),h.vc(23,We,6,1,"ng-container",1),h.vc(24,Ve,6,1,"ng-container",1),h.vc(25,Ge,6,1,"ng-container",1),h.vc(26,Qe,6,1,"ng-container",1),h.vc(27,Be,6,1,"ng-container",1),h.vc(28,Ue,6,1,"ng-container",1),h.vc(29,Ye,7,3,"ng-container",1),h.vc(30,He,4,0,"ng-container",1),h.Ob(),h.vc(31,Xe,5,0,"ng-container",1),h.vc(32,Je,5,0,"ng-container",1),h.Ob(),h.Ob()),2&e){const e=h.ac();h.zb(6),h.gc("ngIf",null==e.entry?null:e.entry.payment_reference),h.zb(1),h.gc("ngIf",null==e.entry?null:e.entry.paid_on),h.zb(1),h.gc("ngIf",null==e.entry?null:e.entry.amount),h.zb(6),h.gc("ngIf",null==e.entry?null:e.entry.full_name),h.zb(1),h.gc("ngIf",null==e.entry?null:e.entry.email_address),h.zb(1),h.gc("ngIf",null==e.entry?null:e.entry.phone_number),h.zb(1),h.gc("ngIf",null==e.entry?null:e.entry.description),h.zb(6),h.gc("ngIf",null==e.entry||null==e.entry.author?null:e.entry.author.full_name),h.zb(1),h.gc("ngIf",(null==e.entry?null:e.entry.author)&&(null==e.entry||null==e.entry.author?null:e.entry.author.matriculation_number)),h.zb(1),h.gc("ngIf",(null==e.entry?null:e.entry.author)&&(null==e.entry||null==e.entry.author?null:e.entry.author.identity_number)),h.zb(1),h.gc("ngIf",null==e.entry?null:e.entry.department_name),h.zb(1),h.gc("ngIf",null==e.entry?null:e.entry.faculty_name),h.zb(1),h.gc("ngIf",null==e.entry||null==e.entry.author?null:e.entry.author.level),h.zb(1),h.gc("ngIf",null==e.entry?null:e.entry.status),h.zb(1),h.gc("ngIf",!0),h.zb(1),h.gc("ngIf",e.canRefundDepartmentPayment&&"department_name"==e.entry.paymentType&&!e.entry.refunded&&e.userDepartment==(null==e.entry?null:e.entry.department_name)),h.zb(1),h.gc("ngIf",e.canRefundFacultyPayment&&"faculty_name"==e.entry.paymentType&&!e.entry.refunded&&e.userFaculty==(null==e.entry?null:e.entry.faculty_name))}}let et=(()=>{class e{constructor(e,t,n,i,r,s){this.router=e,this.route=t,this.gps=n,this.ns=i,this.ems=r,this.aus=s,this.isError=!1,this.isFormSubmitted=!1,this.isFormProcessing=!1,this.isLoading=!1}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.detail.systemType,this.title=e.detail.title,this.view=e.detail.view,this.viewWord=e.detail.viewWord,this.link=e.detail.link,this.gps.$systemType=this.systemType,this.gps.$sa=e.detail.$link,this.route.paramMap.pipe(Object(q.a)(e=>{let t=e.get("entry"),n=e.get("payment");return this.pslug=n,this.eslug=t,this.isLoading=!0,this.gps.getEntry(n,t)})).subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&(this.isLoading=!1,this.entry=e)})}ngOnDestroy(){clearTimeout(this.entryChangesT)}refundEntry(e){}$entryChanges(e){this.entryChangesT=setTimeout(()=>this.router.navigate(["general-payment","t",this.pslug,"entries"]),5e3)}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}get userRole(){return this.aus.userRole}get canUpdateEntry(){return re.indexOf(this.userRole)>-1}get isFormValid(){return this.entryForm.valid}removeNotification(){this.ns.removeNotification()}}return e.\u0275fac=function(t){return new(t||e)(h.Kb(l.d),h.Kb(l.a),h.Kb($),h.Kb(ie.a),h.Kb(m.a),h.Kb(x.a))},e.\u0275cmp=h.Eb({type:e,selectors:[["app-gp-entry-detail"]],features:[h.yb([ie.a,m.a])],decls:7,vars:7,consts:[["id","general-payment"],[4,"ngIf"],[3,"view-type","system-type",4,"ngIf"],[3,"error",4,"ngIf"],[3,"notified","message","finished",4,"ngIf"],["id","gp-details",4,"ngIf"],[3,"is-loading"],[3,"view-type","system-type"],[3,"error"],[3,"notified","message","finished"],["id","gp-details"],[1,"payment-parameters"],["colspan","2"],[1,"left"],[1,"left","bold"],[1,"bold"],["href","#","onclick","print()",1,"entry-option","center"],[1,"refund","option"],[1,"entry-option","center",3,"click"]],template:function(e,t){1&e&&(h.Pb(0,"div",0),h.vc(1,je,2,1,"h2",1),h.vc(2,_e,1,2,"app-view-description",2),h.vc(3,Fe,1,1,"app-resource-unavailable",3),h.vc(4,Ae,1,2,"app-notification-screen",4),h.vc(5,Ze,33,17,"div",5),h.Ob(),h.Lb(6,"app-loading-menu",6)),2&e&&(h.gc("@fadeAnimation",void 0),h.zb(1),h.gc("ngIf",t.title),h.zb(1),h.gc("ngIf",t.view),h.zb(1),h.gc("ngIf",t.isError),h.zb(1),h.gc("ngIf",t.notificationAvailable),h.zb(1),h.gc("ngIf",t.entry),h.zb(1),h.gc("is-loading",t.isLoading))},directives:[i.l,L.a,w.a,T.a,se.a],pipes:[i.d,i.r],styles:["#gp-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:40%}"],data:{animation:[y.a]}}),e})();var tt=n("inDW");const nt=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/;let it=(()=>{class e{constructor(e){this.fb=e}$entryForm(){return this.fb.group({payerName:["",{validators:[r.o.required,r.o.minLength(4),r.o.maxLength(40)]}],payerEmail:["",{validators:[r.o.required,r.o.minLength(4),r.o.maxLength(40),Object(tt.a)(nt)]}],payerPhone:["",{validators:[r.o.required,r.o.minLength(10),r.o.maxLength(14),e=>{let t=e.value;return t.startsWith("+234")&&t.length>14?{payerPhoneIntl:{value:t}}:!t.startsWith("+234")&&t.length>11?{payerPhone:{value:t}}:null}]}],description:["",{validators:[r.o.required,r.o.minLength(9),r.o.maxLength(200)]}],payment_type:["",{validators:[r.o.required,r.o.max(9e8)]}],payment_session:["",{validators:[r.o.required,r.o.max(9e8)]}],amount:["",{validators:[r.o.required,r.o.minLength(2),r.o.maxLength(8)]}]})}searchForm(e){return new r.c("",[Object(tt.d)(e)])}}return e.\u0275fac=function(t){return new(t||e)(h.Tb(r.b))},e.\u0275prov=h.Gb({token:e,factory:e.\u0275fac}),e})();function rt(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Name of ",e.systemType," should be provided and cannot be empty ")}}function st(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Name of ",e.systemType," cannot be less than 4 characters in length ")}}function at(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Name of ",e.systemType," cannot be greater than 40 characters in length ")}}function ct(e,t){if(1&e&&(h.Pb(0,"div",2),h.Pb(1,"ul"),h.vc(2,rt,2,1,"li",0),h.vc(3,st,2,1,"li",0),h.vc(4,at,2,1,"li",0),h.Ob(),h.Ob()),2&e){const e=h.ac(2);h.gc("@fadeAnimation",void 0),h.zb(2),h.gc("ngIf",null==e.payerName.errors?null:e.payerName.errors.required),h.zb(1),h.gc("ngIf",(null==e.payerName.errors?null:e.payerName.errors.required)||(null==e.payerName.errors?null:e.payerName.errors.minlength)),h.zb(1),h.gc("ngIf",(null==e.payerName.errors?null:e.payerName.errors.required)||(null==e.payerName.errors?null:e.payerName.errors.maxlength))}}function ot(e,t){if(1&e&&(h.Nb(0),h.vc(1,ct,5,4,"div",1),h.Mb()),2&e){const e=h.ac();h.zb(1),h.gc("ngIf",e.payerName.invalid&&(e.payerName.touched||e.payerName.dirty))}}function lt(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Email Address of ",e.systemType," should be provided and cannot be empty ")}}function bt(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Email Address of ",e.systemType," cannot be less than 4 characters in length ")}}function ut(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Email Address of ",e.systemType," cannot be greater than 40 characters in length ")}}function pt(e,t){1&e&&(h.Pb(0,"li"),h.xc(1," Payer Email Address should be valid and should conform to standards for example david@gmail.com "),h.Ob())}function yt(e,t){if(1&e&&(h.Pb(0,"div",2),h.Pb(1,"ul"),h.vc(2,lt,2,1,"li",0),h.vc(3,bt,2,1,"li",0),h.vc(4,ut,2,1,"li",0),h.vc(5,pt,2,0,"li",0),h.Ob(),h.Ob()),2&e){const e=h.ac(2);h.gc("@fadeAnimation",void 0),h.zb(2),h.gc("ngIf",null==e.payerEmail.errors?null:e.payerEmail.errors.required),h.zb(1),h.gc("ngIf",(null==e.payerEmail.errors?null:e.payerEmail.errors.required)||(null==e.payerEmail.errors?null:e.payerEmail.errors.minlength)),h.zb(1),h.gc("ngIf",(null==e.payerEmail.errors?null:e.payerEmail.errors.required)||(null==e.payerEmail.errors?null:e.payerEmail.errors.maxlength)),h.zb(1),h.gc("ngIf",(null==e.payerEmail.errors?null:e.payerEmail.errors.required)||(null==e.payerEmail.errors?null:e.payerEmail.errors.emailAddress))}}function ht(e,t){if(1&e&&(h.Nb(0),h.vc(1,yt,6,5,"div",1),h.Mb()),2&e){const e=h.ac();h.zb(1),h.gc("ngIf",e.payerEmail.invalid&&(e.payerEmail.touched||e.payerEmail.dirty))}}function gt(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Phone Number of ",e.systemType," should be provided and cannot be empty ")}}function mt(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Phone Number of ",e.systemType," cannot be less than 10 characters in length ")}}function ft(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Phone Number of ",e.systemType," cannot be greater than 14 characters in length ")}}function dt(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Phone Number of ",e.systemType," if starting with +234 before the last 10 digits should not be greater than 13 characters in length ")}}function vt(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Payer Phone Number of ",e.systemType," if not starting with +234 before the last 10 digits should not be greater than 11 characters in length ")}}function Pt(e,t){if(1&e&&(h.Pb(0,"div",2),h.Pb(1,"ul"),h.vc(2,gt,2,1,"li",0),h.vc(3,mt,2,1,"li",0),h.vc(4,ft,2,1,"li",0),h.vc(5,dt,2,1,"li",0),h.vc(6,vt,2,1,"li",0),h.Ob(),h.Ob()),2&e){const e=h.ac(2);h.gc("@fadeAnimation",void 0),h.zb(2),h.gc("ngIf",null==e.payerPhone.errors?null:e.payerPhone.errors.required),h.zb(1),h.gc("ngIf",(null==e.payerPhone.errors?null:e.payerPhone.errors.required)||(null==e.payerPhone.errors?null:e.payerPhone.errors.minlength)),h.zb(1),h.gc("ngIf",(null==e.payerPhone.errors?null:e.payerPhone.errors.required)||(null==e.payerPhone.errors?null:e.payerPhone.errors.maxlength)),h.zb(1),h.gc("ngIf",(null==e.payerPhone.errors?null:e.payerPhone.errors.required)||(null==e.payerPhone.errors?null:e.payerPhone.errors.payerPhoneIntl)),h.zb(1),h.gc("ngIf",(null==e.payerPhone.errors?null:e.payerPhone.errors.required)||(null==e.payerPhone.errors?null:e.payerPhone.errors.payerPhone))}}function Ot(e,t){if(1&e&&(h.Nb(0),h.vc(1,Pt,7,6,"div",1),h.Mb()),2&e){const e=h.ac();h.zb(1),h.gc("ngIf",e.payerPhone.invalid&&(e.payerPhone.touched||e.payerPhone.dirty))}}function zt(e,t){1&e&&(h.Pb(0,"li"),h.xc(1," Description of Payment should be provided and cannot be empty "),h.Ob())}function It(e,t){1&e&&(h.Pb(0,"li"),h.xc(1," Description of Payment cannot be less than 4 characters in length "),h.Ob())}function Et(e,t){1&e&&(h.Pb(0,"li"),h.xc(1," Description of Payment cannot be greater than 100 characters in length "),h.Ob())}function $t(e,t){if(1&e&&(h.Pb(0,"div",2),h.Pb(1,"ul"),h.vc(2,zt,2,0,"li",0),h.vc(3,It,2,0,"li",0),h.vc(4,Et,2,0,"li",0),h.Ob(),h.Ob()),2&e){const e=h.ac(2);h.gc("@fadeAnimation",void 0),h.zb(2),h.gc("ngIf",null==e.description.errors?null:e.description.errors.required),h.zb(1),h.gc("ngIf",(null==e.description.errors?null:e.description.errors.required)||(null==e.description.errors?null:e.description.errors.minlength)),h.zb(1),h.gc("ngIf",(null==e.description.errors?null:e.description.errors.required)||(null==e.description.errors?null:e.description.errors.maxlength))}}function xt(e,t){if(1&e&&(h.Nb(0),h.vc(1,$t,5,4,"div",1),h.Mb()),2&e){const e=h.ac();h.zb(1),h.gc("ngIf",e.description.invalid&&(e.description.touched||e.description.dirty))}}function Lt(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Amount of ",e.systemType," should be provided and cannot be empty ")}}function wt(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Amount of ",e.systemType," cannot be less than 2 characters in length ")}}function Tt(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(3);h.zb(1),h.yc(" Amount of ",e.systemType," cannot be greater than 8 characters in length ")}}function Nt(e,t){if(1&e&&(h.Pb(0,"div",2),h.Pb(1,"ul"),h.vc(2,Lt,2,1,"li",0),h.vc(3,wt,2,1,"li",0),h.vc(4,Tt,2,1,"li",0),h.Ob(),h.Ob()),2&e){const e=h.ac(2);h.gc("@fadeAnimation",void 0),h.zb(2),h.gc("ngIf",null==e.amt.errors?null:e.amt.errors.required),h.zb(1),h.gc("ngIf",(null==e.amt.errors?null:e.amt.errors.required)||(null==e.amt.errors?null:e.amt.errors.minlength)),h.zb(1),h.gc("ngIf",(null==e.amt.errors?null:e.amt.errors.required)||(null==e.amt.errors?null:e.amt.errors.maxlength))}}function kt(e,t){if(1&e&&(h.Nb(0),h.vc(1,Nt,5,4,"div",1),h.Mb()),2&e){const e=h.ac();h.zb(1),h.gc("ngIf",e.amt.invalid&&(e.amt.touched||e.amt.dirty))}}let jt=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Eb({type:e,selectors:[["app-gp-entry-create-validator"]],inputs:{systemType:["system-type","systemType"],payerName:["payer-name","payerName"],payerEmail:["payer-email","payerEmail"],payerPhone:["payer-phone","payerPhone"],description:"description",amt:"amt"},decls:5,vars:5,consts:[[4,"ngIf"],["class","validation-error",4,"ngIf"],[1,"validation-error"]],template:function(e,t){1&e&&(h.vc(0,ot,2,1,"ng-container",0),h.vc(1,ht,2,1,"ng-container",0),h.vc(2,Ot,2,1,"ng-container",0),h.vc(3,xt,2,1,"ng-container",0),h.vc(4,kt,2,1,"ng-container",0)),2&e&&(h.gc("ngIf",t.payerName),h.zb(1),h.gc("ngIf",t.payerEmail),h.zb(1),h.gc("ngIf",t.payerPhone),h.zb(1),h.gc("ngIf",t.description),h.zb(1),h.gc("ngIf",t.amt))},directives:[i.l],styles:[""],data:{animation:[y.a]}}),e})();function _t(e,t){if(1&e&&h.Lb(0,"app-view-description",7),2&e){const e=h.ac();h.gc("view-description",e.view)("system-type",e.systemType)}}function Ft(e,t){if(1&e&&h.Lb(0,"app-guidelines",8),2&e){const e=h.ac();h.gc("view",e.view)("system-guideline",e.systemGuideline)}}function At(e,t){if(1&e&&h.Lb(0,"app-resource-unavailable",9),2&e){const e=h.ac();h.gc("error",e.error)}}function St(e,t){if(1&e){const e=h.Qb();h.Pb(0,"app-notification-screen",10),h.Wb("finished",function(){return h.rc(e),h.ac().removeNotification()}),h.Ob()}if(2&e){const e=h.ac();h.gc("notified",e.notificationAvailable)("message",e.notificationMessage)}}function Mt(e,t){if(1&e&&(h.Pb(0,"option",14),h.xc(1),h.Ob()),2&e){const e=t.$implicit;h.gc("value",e._id),h.zb(1),h.yc(" ",e.name," ")}}function Ct(e,t){if(1&e){const e=h.Qb();h.Nb(0),h.Pb(1,"div",11),h.Pb(2,"label",12),h.xc(3," Payment Session * : "),h.Ob(),h.Pb(4,"select",13),h.Wb("change",function(t){return h.rc(e),h.ac().verifyPaymentSession(t.target)}),h.Lb(5,"option",14),h.vc(6,Mt,2,2,"option",15),h.Ob(),h.Ob(),h.Mb()}if(2&e){const e=h.ac();h.zb(4),h.gc("readOnly",e.noEdit)("formControl",e.paymentSessionCtrl),h.zb(2),h.gc("ngForOf",e.paymentSession)}}function Dt(e,t){if(1&e&&h.Lb(0,"app-gp-entry-create-validator",34),2&e){const e=h.ac(2);h.gc("system-type",e.systemType)("payer-name",e.payerName)}}function Kt(e,t){if(1&e&&h.Lb(0,"app-gp-entry-create-validator",35),2&e){const e=h.ac(2);h.gc("system-type",e.systemType)("payer-email",e.payerEmail)}}function qt(e,t){if(1&e&&h.Lb(0,"app-gp-entry-create-validator",36),2&e){const e=h.ac(2);h.gc("system-type",e.systemType)("payer-phone",e.payerPhone)}}function Rt(e,t){if(1&e&&h.Lb(0,"app-gp-entry-create-validator",37),2&e){const e=h.ac(2);h.gc("system-type",e.systemType)("description",e.description)}}function Wt(e,t){if(1&e&&h.Lb(0,"app-gp-entry-create-validator",38),2&e){const e=h.ac(2);h.gc("system-type",e.systemType)("amount",e.amount)}}const Vt=function(e){return{disabled:e}};function Gt(e,t){if(1&e&&(h.Pb(0,"button",39),h.xc(1," Submit "),h.Ob()),2&e){const e=h.ac(2);h.Bb(h.lc(3,Vt,!e.isFormValid)),h.gc("disabled",!e.isFormValid)}}function Qt(e,t){1&e&&(h.Pb(0,"p"),h.xc(1," Your form is being processed. Please kindly be patient and wait while it completes. "),h.Ob())}function Bt(e,t){if(1&e){const e=h.Qb();h.Nb(0),h.Pb(1,"div",16),h.Pb(2,"form",17),h.Wb("ngSubmit",function(){h.rc(e);const t=h.ac();return t.createEntry(t.entryForm.value)}),h.Pb(3,"h3"),h.xc(4," Payment Form "),h.Ob(),h.Pb(5,"div",11),h.Pb(6,"label",18),h.xc(7," Full Name * : "),h.Ob(),h.Lb(8,"input",19),h.vc(9,Dt,1,2,"app-gp-entry-create-validator",20),h.Ob(),h.Pb(10,"div",11),h.Pb(11,"label",21),h.xc(12," Email Address * : "),h.Ob(),h.Lb(13,"input",22),h.vc(14,Kt,1,2,"app-gp-entry-create-validator",23),h.Ob(),h.Pb(15,"div",11),h.Pb(16,"label",24),h.xc(17," Phone Number * : "),h.Ob(),h.Lb(18,"input",25),h.vc(19,qt,1,2,"app-gp-entry-create-validator",26),h.Ob(),h.Pb(20,"div",11),h.Pb(21,"label",27),h.xc(22," Description of Payment * : "),h.Ob(),h.Lb(23,"input",28),h.vc(24,Rt,1,2,"app-gp-entry-create-validator",29),h.Ob(),h.Pb(25,"div",11),h.Pb(26,"label",30),h.xc(27," Amount * : "),h.Ob(),h.Lb(28,"input",31),h.vc(29,Wt,1,2,"app-gp-entry-create-validator",32),h.Ob(),h.vc(30,Gt,2,5,"button",33),h.vc(31,Qt,2,0,"p",5),h.Ob(),h.Ob(),h.Mb()}if(2&e){const e=h.ac();h.zb(2),h.gc("formGroup",e.entryForm),h.zb(7),h.gc("ngIf",e.payerName),h.zb(5),h.gc("ngIf",e.payerEmail),h.zb(5),h.gc("ngIf",e.payerPhone),h.zb(5),h.gc("ngIf",e.description),h.zb(5),h.gc("ngIf",e.amount),h.zb(1),h.gc("ngIf",!e.isFormProcessing),h.zb(1),h.gc("ngIf",e.isFormSubmitted)}}let Ut=(()=>{class e{constructor(e,t,n,i,s,a){this.route=e,this.router=t,this.ns=n,this.ems=i,this.gps=s,this.gpfs=a,this.isError=!1,this.isFormSubmitted=!1,this.isFormProcessing=!1,this.submission=!1,this.isLoading=!1,this.paymentSessionCtrl=new r.c}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.create.systemType,this.title=e.create.title,this.view=e.create.view,this.viewWord=e.create.viewWord,this.link=e.create.link,this.$link=e.create.$link,this.systemGuideline=e.create.systemGuideline,this.paymentRule=e.create.paymentRule,this.gps.$systemType=this.systemType,this.gps.$sa=this.$link,this.route.paramMap.pipe(Object(q.a)(e=>{let t=e.get("payment");return this.pslug=t,this.isLoading=!0,this.gps.addEntry(t)})).subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):1==e.permitted&&null!=e.$data&&null!=e.$data.status?(this.isLoading=!1,this.router.navigate(["/general-payment",this.link,"entry","detail",e.$data._id])):1==e.permitted&&(this.isLoading=!1,this.paymentSession=e.$data.payment_session,this.paymentType=e.$data.payment_type)})}verifyPaymentSession(e){if(""==e.value)return!1;if(e.value==this.prev_psession)return!1;this.prev_psession=e.value;let t={payment_type:this.paymentType,payment_session:e.value};this.isLoading=!0,this.gps.checkPayment(this.pslug,t).subscribe(e=>{let t=e.$data;null!=t.slug?(this.isLoading=!1,this.router.navigate(["general-payment","t",this.pslug,"entry",t.slug,"detail"])):(this.isLoading=!1,this.entry=t,this.entryForm=this.gpfs.$entryForm(),this.entryForm.patchValue({description:t.description,amount:t.amount,payment_type:t.payment_type,payment_session:t.payment_session}))})}createEntry(e){e.amount=100*this.entry.amount,e.email=e.payerEmail,e.callback_url=`https://volunux.github.io/Student-Support-and-Thesis-Management-System/general-payment/t/${this.pslug}/validation`,e.metadata={full_name:e.payerName,email_address:e.payerEmail,phone_number:e.payerPhone,payment_type:e.payment_type,payment_session:e.payment_session},this.submission=!0,this.isFormSubmitted=!0,this.error=null,this.isError=!1,this.isFormProcessing=!0,this.gps.$initializePayment(e).subscribe(e=>{if(null==e)this.isFormSubmitted=!1,this.isFormProcessing=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification("Network error has occured. Payment is only a possiblity when there is Internet connection.");else if(null!=e&&1==e.created)return this.isFormSubmitted=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is successful and ${this.systemType} is added.`),location.href=e.$data.data.authorization_url})}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}removeNotification(){this.ns.removeNotification()}get payerName(){return this.entryForm.get("payerName")}get payerEmail(){return this.entryForm.get("payerEmail")}get payerPhone(){return this.entryForm.get("payerPhone")}get description(){return this.entryForm.get("description")}get amt(){return this.entryForm.get("amt")}get isFormValid(){return this.entryForm.valid}}return e.\u0275fac=function(t){return new(t||e)(h.Kb(l.a),h.Kb(l.d),h.Kb(ie.a),h.Kb(m.a),h.Kb($),h.Kb(it))},e.\u0275cmp=h.Eb({type:e,selectors:[["app-gp-entry-create"]],features:[h.yb([ie.a,m.a])],decls:10,vars:9,consts:[["id","general-payment"],[3,"view-description","system-type",4,"ngIf"],[3,"view","system-guideline",4,"ngIf"],[3,"error",4,"ngIf"],[3,"notified","message","finished",4,"ngIf"],[4,"ngIf"],[3,"is-loading"],[3,"view-description","system-type"],[3,"view","system-guideline"],[3,"error"],[3,"notified","message","finished"],[1,"form-group"],["for","paymentSession",1,"form-label","bold"],["name","paymentSession","id","paymentSession","required","required",1,"form-control",3,"readOnly","formControl","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["id","gp-form"],["method","post","autocomplete","off","enctype","application/x-www-form-urlencoded",3,"formGroup","ngSubmit"],["for","payer-name",1,"form-label","bold"],["type","text","id","payer-name","name","payerName","placeholder","David Muller","formControlName","payerName","autocomplete","new-payerName",1,"form-control"],[3,"system-type","payer-name",4,"ngIf"],["for","payer-email",1,"form-label","bold"],["type","text","id","payer-email","name","payerEmail","placeholder","david@example.com","formControlName","payerEmail","autocomplete","new-payerEmail",1,"form-control"],[3,"system-type","payer-email",4,"ngIf"],["for","payer-phone",1,"form-label","bold"],["type","text","id","payer-phone","name","payerPhone","placeholder","09022035587 or +2349022035587","formControlName","payerPhone","autocomplete","new-payerPhone",1,"form-control"],[3,"system-type","payer-phone",4,"ngIf"],["for","description",1,"form-label","bold"],["type","text","id","description","name","description","readonly","readonly","value","Departmental Fee Payment","formControlName","description","autocomplete","new-description",1,"form-control"],[3,"system-type","description",4,"ngIf"],["for","amount",1,"form-label","bold"],["type","text","id","amount","name","amount","readonly","readonly","formControlName","amount","autocomplete","new-amount",1,"form-control"],[3,"system-type","amount",4,"ngIf"],["type","submit","class","btn-submit",3,"class","disabled",4,"ngIf"],[3,"system-type","payer-name"],[3,"system-type","payer-email"],[3,"system-type","payer-phone"],[3,"system-type","description"],[3,"system-type","amount"],["type","submit",1,"btn-submit",3,"disabled"]],template:function(e,t){1&e&&(h.Pb(0,"div",0),h.Pb(1,"h2"),h.xc(2),h.Ob(),h.vc(3,_t,1,2,"app-view-description",1),h.vc(4,Ft,1,2,"app-guidelines",2),h.vc(5,At,1,1,"app-resource-unavailable",3),h.vc(6,St,1,2,"app-notification-screen",4),h.vc(7,Ct,7,3,"ng-container",5),h.vc(8,Bt,32,8,"ng-container",5),h.Ob(),h.Lb(9,"app-loading-menu",6)),2&e&&(h.gc("@fadeAnimation",void 0),h.zb(2),h.yc(" ",t.title," "),h.zb(1),h.gc("ngIf",t.view),h.zb(1),h.gc("ngIf",t.systemGuideline),h.zb(1),h.gc("ngIf",t.error),h.zb(1),h.gc("ngIf",t.notificationAvailable),h.zb(1),h.gc("ngIf",null!=t.paymentSession&&(null==t.paymentSession?null:t.paymentSession.length)>0),h.zb(1),h.gc("ngIf",t.entryForm),h.zb(1),h.gc("is-loading",t.isLoading))},directives:[i.l,L.a,w.a,T.a,se.a,r.n,r.m,r.i,r.d,r.k,r.p,i.k,r.q,r.j,r.g,r.a,r.e,jt],styles:[""],data:{animation:[y.a]}}),e})();var Yt=n("1B5t");function Ht(e,t){if(1&e&&(h.Pb(0,"h2"),h.xc(1),h.Ob()),2&e){const e=h.ac();h.zb(1),h.yc(" ",e.title," ")}}function Xt(e,t){if(1&e&&h.Lb(0,"app-view-description",7),2&e){const e=h.ac();h.gc("system-type",e.systemType)("view-type",e.view)}}function Jt(e,t){if(1&e){const e=h.Qb();h.Pb(0,"app-notification-screen",8),h.Wb("finished",function(){return h.rc(e),h.ac().removeNotification()}),h.Ob()}if(2&e){const e=h.ac();h.gc("notified",e.notificationAvailable)("message",e.notificationMessage)}}function Zt(e,t){if(1&e&&h.Lb(0,"app-resource-unavailable",9),2&e){const e=h.ac();h.gc("error",e.error)}}function en(e,t){if(1&e&&h.Lb(0,"app-delete-all-entry",13),2&e){const e=h.ac(2);h.gc("system-type",e.systemType)}}function tn(e,t){if(1&e){const e=h.Qb();h.Pb(0,"button",14),h.Wb("click",function(){return h.rc(e),h.ac(2).deleteAllEntry()}),h.xc(1," Confirm "),h.Ob()}}function nn(e,t){1&e&&(h.Pb(0,"p"),h.xc(1," Your form is being processed. Please kindly be patient and wait while it completes. "),h.Ob())}function rn(e,t){if(1&e&&(h.Pb(0,"div",10),h.vc(1,en,1,1,"app-delete-all-entry",11),h.vc(2,tn,2,0,"button",12),h.vc(3,nn,2,0,"p",1),h.Ob()),2&e){const e=h.ac();h.gc("@fadeAnimation",void 0),h.zb(1),h.gc("ngIf",e.systemType),h.zb(1),h.gc("ngIf",!e.isFormProcessing),h.zb(1),h.gc("ngIf",e.isFormSubmitted)}}let sn=(()=>{class e{constructor(e,t,n,i,r){this.route=e,this.router=t,this.gps=n,this.ems=i,this.ns=r,this.isError=!1,this.isFormSubmitted=!1,this.isFormProcessing=!1,this.canDelete=!1,this.isLoading=!1}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.deleteAll.systemType,this.viewWord=e.deleteAll.viewWord,this.title=e.deleteAll.title,this.view=e.deleteAll.view,this.link=e.deleteAll.link,this.route.paramMap.pipe(Object(q.a)(e=>{let t=e.get("payment");return this.pslug=t,this.isLoading=!0,this.gps.deleteAllEntry(t)})).subscribe(e=>{null==e?(this.isLoading=!1,this.canDelete=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&e.length>0&&(this.isLoading=!1,this.canDelete=!0)})}ngOnDestroy(){clearTimeout(this.entryChangesT)}deleteAllEntry(){if(!confirm("Are you sure you want to proceed with this action?"))return!1;this.gps.$systemType=this.systemType,this.isFormSubmitted=!0,this.error=null,this.isError=!1,this.isFormProcessing=!0,this.gps.deleteAllEntry$(this.pslug).subscribe(e=>{if(null==e)return this.isFormSubmitted=!1,this.isFormProcessing=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is unsuccessful and all ${this.systemType} entry is not deleted.`),this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message);this.isFormSubmitted=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is successful and all ${this.systemType} entry is deleted.`),this.$entryChanges({})})}$entryChanges(e){this.entryChangesT=setTimeout(()=>this.router.navigate(["system","general-payment"]),5e3)}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}removeNotification(){this.ns.removeNotification()}}return e.\u0275fac=function(t){return new(t||e)(h.Kb(l.a),h.Kb(l.d),h.Kb($),h.Kb(m.a),h.Kb(ie.a))},e.\u0275cmp=h.Eb({type:e,selectors:[["app-gp-entry-delete-all"]],features:[h.yb([ie.a,m.a])],decls:7,vars:6,consts:[["id","entry-delete-all"],[4,"ngIf"],[3,"system-type","view-type",4,"ngIf"],[3,"notified","message","finished",4,"ngIf"],[3,"error",4,"ngIf"],["id","entry-detail",4,"ngIf"],[3,"is-loading"],[3,"system-type","view-type"],[3,"notified","message","finished"],[3,"error"],["id","entry-detail"],[3,"system-type",4,"ngIf"],["class","btn-submit","type","submit",3,"click",4,"ngIf"],[3,"system-type"],["type","submit",1,"btn-submit",3,"click"]],template:function(e,t){1&e&&(h.Pb(0,"div",0),h.vc(1,Ht,2,1,"h2",1),h.vc(2,Xt,1,2,"app-view-description",2),h.vc(3,Jt,1,2,"app-notification-screen",3),h.vc(4,Zt,1,1,"app-resource-unavailable",4),h.vc(5,rn,4,4,"div",5),h.Ob(),h.Lb(6,"app-loading-menu",6)),2&e&&(h.zb(1),h.gc("ngIf",t.title),h.zb(1),h.gc("ngIf",t.view),h.zb(1),h.gc("ngIf",t.notificationAvailable),h.zb(1),h.gc("ngIf",t.error),h.zb(1),h.gc("ngIf",t.canDelete),h.zb(1),h.gc("is-loading",t.isLoading))},directives:[i.l,L.a,w.a,se.a,T.a,Yt.a],styles:[""],data:{animation:[y.a]}}),e})();function an(e,t){if(1&e&&(h.Pb(0,"h2"),h.xc(1),h.Ob()),2&e){const e=h.ac();h.zb(1),h.yc(" ",e.title," ")}}function cn(e,t){if(1&e&&h.Lb(0,"app-view-description",5),2&e){const e=h.ac();h.gc("view-type",e.view)}}function on(e,t){if(1&e&&h.Lb(0,"app-resource-unavailable",6),2&e){const e=h.ac();h.gc("error",e.error)}}let ln=(()=>{class e{constructor(e,t,n,i,r){this.router=e,this.ns=t,this.ems=n,this.route=i,this.gps=r,this.isError=!1,this.isLoading=!1}ngOnInit(){this.gps.$systemType=this.systemType,this.gps.$sa=this.$link,this.route.queryParams.pipe(Object(q.a)(e=>{let t=e.reference;return this.pslug=this.route.snapshot.paramMap.get("payment"),this.isLoading=!0,this.gps.$verifyPayment(t)})).subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&1==e.verified&&(this.isLoading=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is successful and ${this.systemType} is added.`),this.entryChanges(e.$data))})}ngOnDestroy(){clearTimeout(this.entryChangesT)}entryChanges(e){this.entryChangesT=setTimeout(()=>this.router.navigate(e&&e._id?["general-payment","t",this.pslug,"entry",e.slug,"detail"]:["general-payment","t",this.pslug],{replaceUrl:!0}),5e3)}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}removeNotification(){this.ns.removeNotification()}}return e.\u0275fac=function(t){return new(t||e)(h.Kb(l.d),h.Kb(ie.a),h.Kb(m.a),h.Kb(l.a),h.Kb($))},e.\u0275cmp=h.Eb({type:e,selectors:[["app-gp-entry-verification"]],features:[h.yb([ie.a,m.a])],decls:7,vars:5,consts:[["id","general-payment"],[4,"ngIf"],[3,"view-type",4,"ngIf"],[3,"error",4,"ngIf"],[3,"is-loading"],[3,"view-type"],[3,"error"]],template:function(e,t){1&e&&(h.Pb(0,"div",0),h.vc(1,an,2,1,"h2",1),h.Pb(2,"p"),h.xc(3," Kindly be patient while the payment is being processed. "),h.Ob(),h.vc(4,cn,1,1,"app-view-description",2),h.vc(5,on,1,1,"app-resource-unavailable",3),h.Ob(),h.Lb(6,"app-loading-menu",4)),2&e&&(h.gc("@fadeAnimation",void 0),h.zb(1),h.gc("ngIf",t.title),h.zb(3),h.gc("ngIf",t.view),h.zb(1),h.gc("ngIf",t.isError),h.zb(1),h.gc("is-loading",t.isLoading))},directives:[i.l,L.a,w.a,T.a],styles:[""],data:{animation:[y.a]}}),e})();function bn(e,t){if(1&e&&(h.Pb(0,"h2"),h.xc(1),h.Ob()),2&e){const e=h.ac();h.zb(1),h.yc(" ",e.title," ")}}function un(e,t){if(1&e&&h.Lb(0,"app-view-description",5),2&e){const e=h.ac();h.gc("view-type",e.view)("system-type",e.systemType)}}function pn(e,t){if(1&e&&h.Lb(0,"app-resource-unavailable",6),2&e){const e=h.ac();h.gc("error",e.error)}}function yn(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(4);h.zb(1),h.yc(" Payment Reference of ",e.systemType," should be provided and cannot be empty ")}}function hn(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(4);h.zb(1),h.yc(" Payment Reference of ",e.systemType," cannot be less than 4 characters in length ")}}function gn(e,t){if(1&e&&(h.Pb(0,"li"),h.xc(1),h.Ob()),2&e){const e=h.ac(4);h.zb(1),h.yc(" Payment Reference of ",e.systemType," cannot be greater than 30 characters in length ")}}function mn(e,t){if(1&e&&(h.Pb(0,"div",13),h.Pb(1,"ul"),h.vc(2,yn,2,1,"li",1),h.vc(3,hn,2,1,"li",1),h.vc(4,gn,2,1,"li",1),h.Ob(),h.Ob()),2&e){const e=h.ac(3);h.gc("@fadeAnimation",void 0),h.zb(2),h.gc("ngIf",null==e.payment_reference.errors?null:e.payment_reference.errors.required),h.zb(1),h.gc("ngIf",(null==e.payment_reference.errors?null:e.payment_reference.errors.required)||(null==e.payment_reference.errors?null:e.payment_reference.errors.minlength)),h.zb(1),h.gc("ngIf",(null==e.payment_reference.errors?null:e.payment_reference.errors.required)||(null==e.payment_reference.errors?null:e.payment_reference.errors.maxlength))}}function fn(e,t){if(1&e&&(h.Nb(0),h.vc(1,mn,5,4,"div",12),h.Mb()),2&e){const e=h.ac(2);h.zb(1),h.gc("ngIf",e.payment_reference.invalid&&(e.payment_reference.touched||e.payment_reference.dirty))}}const dn=function(e){return{disabled:e}};function vn(e,t){if(1&e&&(h.Pb(0,"button",14),h.xc(1," Verify Payment "),h.Ob()),2&e){const e=h.ac(2);h.Bb(h.lc(3,dn,!e.isFormValid)),h.gc("disabled",!e.isFormValid)}}function Pn(e,t){1&e&&(h.Pb(0,"p"),h.xc(1," Your form is being processed. Please kindly be patient and wait while it completes. "),h.Ob())}function On(e,t){if(1&e){const e=h.Qb();h.Pb(0,"div"),h.Pb(1,"form",7),h.Wb("ngSubmit",function(){h.rc(e);const t=h.ac();return t.verifyPayment(t.entryForm.value)}),h.Pb(2,"div",8),h.Pb(3,"label",9),h.xc(4," Payment Reference * : "),h.Ob(),h.Lb(5,"input",10),h.vc(6,fn,2,1,"ng-container",1),h.Ob(),h.vc(7,vn,2,5,"button",11),h.vc(8,Pn,2,0,"p",1),h.Ob(),h.Ob()}if(2&e){const e=h.ac();h.zb(1),h.gc("formGroup",e.entryForm),h.zb(5),h.gc("ngIf",e.payment_reference),h.zb(1),h.gc("ngIf",!e.isFormProcessing),h.zb(1),h.gc("ngIf",e.isFormSubmitted)}}const zn=function(e,t,n,i){return{pending:e,success:t,failed:n,refunded:i}};function In(e,t){if(1&e&&(h.Pb(0,"div"),h.Pb(1,"div",15),h.Pb(2,"p",16),h.Pb(3,"span",16),h.xc(4," Status : "),h.Ob(),h.Pb(5,"span",17),h.xc(6),h.Ob(),h.Ob(),h.Pb(7,"p",16),h.xc(8),h.Ob(),h.Ob(),h.Ob()),2&e){const e=h.ac();h.zb(5),h.gc("ngClass",h.oc(3,zn,"Pending"==(null==e.entry?null:e.entry.status),"Success"==(null==e.entry?null:e.entry.status),"Failed"==(null==e.entry?null:e.entry.status),"Refunded"==(null==e.entry?null:e.entry.status))),h.zb(1),h.yc(" ",e.entry.status," "),h.zb(2),h.yc(" Payment Type : ",e.entry.payment_type_name," ")}}let En=(()=>{class e{constructor(e,t,n,i,r){this.router=e,this.route=t,this.gps=n,this.ems=i,this.aus=r,this.entry=null,this.isError=!1,this.isFormSubmitted=!1,this.isFormProcessing=!1,this.isLoading=!1}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.verify.systemType,this.title=e.verify.title,this.view=e.verify.view,this.viewWord=e.verify.viewWord,this.link=e.verify.link,this.gps.$systemType=this.systemType,this.gps.$sa=e.verify.$link,this.route.paramMap.pipe(Object(q.a)(e=>(this.isLoading=!0,this.gps.getStatus()))).subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&(this.isLoading=!1,this.entryForm=new r.f({payment_reference:new r.c("",[r.o.required,r.o.minLength(4),r.o.maxLength(30)])}))})}ngOnDestroy(){clearTimeout(this.entryChangesT)}verifyPayment(e){this.payment_ref_checked!=e.payment_reference&&(this.payment_ref_checked=e.payment_reference,this.entry=null,this.isFormSubmitted=!0,this.error=null,this.isError=!1,this.isFormProcessing=!0,this.gps.confirmStatus(e).subscribe(e=>{null==e?(this.isFormSubmitted=!1,this.isFormProcessing=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&(this.isFormProcessing=!1,this.isFormSubmitted=!1,this.entry=e)}))}get userRole(){return this.aus.userRole}get payment_reference(){return this.entryForm.get("payment_reference")}get isFormValid(){return this.entryForm.valid}}return e.\u0275fac=function(t){return new(t||e)(h.Kb(l.d),h.Kb(l.a),h.Kb($),h.Kb(m.a),h.Kb(x.a))},e.\u0275cmp=h.Eb({type:e,selectors:[["app-gp-entry-receipt"]],features:[h.yb([m.a])],decls:7,vars:7,consts:[["id","general-payment"],[4,"ngIf"],[3,"view-type","system-type",4,"ngIf"],[3,"error",4,"ngIf"],[3,"is-loading"],[3,"view-type","system-type"],[3,"error"],["autocomplete","new-payment-verification",3,"formGroup","ngSubmit"],[1,"form-group"],["for","payment-reference",1,"form-label","bold"],["type","text","id","payment-reference","name","payment_reference","placeholder","abczyxxyzaslkj","formControlName","payment_reference","autocomplete","new-payment_reference",1,"form-control"],["type","submit","class","btn-submit",3,"class","disabled",4,"ngIf"],["class","validation-error",4,"ngIf"],[1,"validation-error"],["type","submit",1,"btn-submit",3,"disabled"],[1,"payment-status"],[1,""],[3,"ngClass"]],template:function(e,t){1&e&&(h.Pb(0,"div",0),h.vc(1,bn,2,1,"h2",1),h.vc(2,un,1,2,"app-view-description",2),h.vc(3,pn,1,1,"app-resource-unavailable",3),h.vc(4,On,9,4,"div",1),h.vc(5,In,9,8,"div",1),h.Ob(),h.Lb(6,"app-loading-menu",4)),2&e&&(h.gc("@fadeAnimation",void 0),h.zb(1),h.gc("ngIf",t.title),h.zb(1),h.gc("ngIf",t.view),h.zb(1),h.gc("ngIf",t.isError),h.zb(1),h.gc("ngIf",t.entryForm),h.zb(1),h.gc("ngIf",null!=t.entry),h.zb(1),h.gc("is-loading",t.isLoading))},directives:[i.l,L.a,w.a,T.a,r.q,r.j,r.g,r.a,r.i,r.e,i.j],styles:[".payment-status[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:18px;font-family:Arial}.pending[_ngcontent-%COMP%]{color:#00f}.failed[_ngcontent-%COMP%]{color:red}.success[_ngcontent-%COMP%]{color:green}.refunded[_ngcontent-%COMP%]{color:purple}"],data:{animation:[y.a]}}),e})(),$n={systemType:"General Payment",title:"General Payment",view:"gp",viewWord:"Payment",link:"payment",$link:"general-payment",systemGuideline:"payment",base:"payment"};const xn={dashboard:Object.assign({},$n),create:Object.assign(Object.assign({},$n),{title:`Make ${$n.systemType} Payment`,paymentRule:{amount:"1000",description:"Departmental Fee Payment",type:"department",callback:"http://localhost:4200/payment/department/validation/"}}),detail:Object.assign(Object.assign({},$n),{title:$n.systemType+" Entry"}),entries:Object.assign(Object.assign({},$n),{title:$n.systemType+" Entries",searchFilters:{paymentReference:"Payment Reference",department:"Department",status:"Status"}}),validation:Object.assign(Object.assign({},$n),{title:"Verifying "+$n.systemType}),verify:Object.assign(Object.assign({},$n),{title:`Verify ${$n.systemType} Status`}),deleteAll:Object.assign(Object.assign({},$n),{title:$n.systemType+" Entries : Delete All"})},Ln=[{path:"",component:g,canActivate:[b.a],canLoad:[b.a],children:[{path:"",canActivateChild:[b.a],canLoad:[b.a],children:[{path:"",component:K,data:{dashboard:xn.dashboard}},{path:"t/:payment",component:ee,data:{dashboard:xn.dashboard}},{path:"t/:payment/entries",component:ke,data:{entries:xn.entries}},{path:"t/:payment/entry/:entry/detail",component:et,data:{detail:xn.detail}},{path:"t/:payment/entry/create",component:Ut,canActivate:[u.a],data:{create:xn.detail}},{path:"t/:payment/validation",component:ln,data:{validation:xn.validation}},{path:"verify-status",component:En,data:{verify:xn.verify}},{path:"entry/delete/all",component:sn,canActivate:[p.a],data:{deleteAll:xn.deleteAll}}]}]}];let wn=(()=>{class e{}return e.\u0275mod=h.Ib({type:e}),e.\u0275inj=h.Hb({factory:function(t){return new(t||e)},imports:[[l.g.forChild(Ln)],l.g]}),e})(),Tn=(()=>{class e{}return e.\u0275mod=h.Ib({type:e}),e.\u0275inj=h.Hb({factory:function(t){return new(t||e)},providers:[$,it],imports:[[i.b,wn,r.l,s.a,c.a,a.a,o.a]]}),e})()}}]);