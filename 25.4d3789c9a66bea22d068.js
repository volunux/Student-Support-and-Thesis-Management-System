(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"9Xeq":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("Yvf7"),s=n("Ub9n");let r=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},imports:[[i.b]]}),e})()},AuHR:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("OX4D");function s(e=-1){return t=>t.lift(new r(e,t))}class r{constructor(e,t){this.count=e,this.source=t}call(e,t){return t.subscribe(new a(e,this.count,this.source))}}class a extends i.a{constructor(e,t,n){super(e),this.count=t,this.source=n}error(e){if(!this.isStopped){const{source:t,count:n}=this;if(0===n)return super.error(e);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}}}},jiyY:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("Ub9n"),s=n("9Ku7"),r=n("Fk62");let a=(()=>{class e{constructor(e,t){this.aus=e,this.router=t}canActivate(e,t){return this.verifyLogin(t.url)}canActivateChild(e,t){return this.canActivate(e,t)}canLoad(e){return this.verifyLogin(e.path)}verifyLogin(e){return!!this.aus.isLoggedIn()||(this.aus.redirectAddress=e,this.router.parseUrl("/sign-in"))}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(s.a),i.Tb(r.e))},e.\u0275prov=i.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},uEry:function(e,t,n){"use strict";n.r(t),n.d(t,"GeneralPaymentModule",function(){return jn});var i=n("Yvf7"),s=n("8VHZ"),r=n("hxwH"),a=n("O/oE"),c=n("9Xeq"),o=n("kPid"),l=n("Fk62"),b=n("jiyY"),u=n("iojP"),y=n("/zEo"),p=n("J1Ni"),g=n("Ub9n");let h=(()=>{class e{constructor(){}ngOnInit(){}getAnimationData(e){return e&&e.activatedRouteData&&e.activatedRouteData.animation}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Eb({type:e,selectors:[["app-gp-homepage"]],decls:1,vars:0,template:function(e,t){1&e&&g.Lb(0,"router-outlet")},directives:[l.h],styles:[""],data:{animation:[p.d]}}),e})();var d=n("EUGn"),f=n("jV/k"),m=n("vfyW"),v=n("XRyL"),P=n("oECA"),O=n("O6Zd"),z=n("AuHR"),I=n("VcWf"),E=n("FBrc");let $=(()=>{class e{constructor(e,t,n){this.http=e,this.apiConfig=t,this.ems=n,this.$systemType="General Payment",this.$sa="general-payment"}managePayment(){return this.http.get(`${this.apiConfig.host}/${this.$sa}/manage`).pipe(Object(m.a)(e=>console.log(e)),Object(v.a)(2e3),Object(P.a)(this.handleError("Payment Type Entries",null)))}managePaymentEntry(e){return this.http.get(`${this.apiConfig.host}/${this.$sa}/manage/t/${e}`).pipe(Object(m.a)(e=>console.log(e)),Object(v.a)(2e3),Object(P.a)(this.handleError("Payment Type Entry",null)))}getAllEntry(e){return this.http.get(`${this.apiConfig.host}/${this.$sa}/t/${this.ptype}/entries`,{params:e}).pipe(Object(m.a)(e=>console.log(e)),Object(v.a)(2e3),Object(P.a)(this.handleError(this.$systemType+" Entries",null)))}getEntry(e,t){return this.http.get(`${this.apiConfig.host}/${this.$sa}/t/${e}/entry/${t}/detail`).pipe(Object(m.a)(e=>console.log(e)),Object(v.a)(2e3),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}getStatus(){return this.http.get(`${this.apiConfig.host}/${this.$sa}/transaction-status`).pipe(Object(m.a)(e=>console.log(e)),Object(v.a)(2e3),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}confirmStatus(e){return this.http.post(`${this.apiConfig.host}/${this.$sa}/transaction-status`,e).pipe(Object(m.a)(e=>console.log(e)),Object(v.a)(2e3),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}addEntry(e){return this.http.get(`${this.apiConfig.host}/${this.$sa}/t/${e}/entry/create`).pipe(Object(m.a)(e=>console.log(e)),Object(v.a)(2e3),Object(O.a)(e=>({permitted:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}addEntry$(e,t){return this.http.post(`${this.apiConfig.host}/${this.$sa}/t/${e}/entry/create`,t).pipe(Object(m.a)(e=>console.log(e)),Object(O.a)(e=>({created:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}checkPayment(e,t){return this.http.post(`${this.apiConfig.host}/${this.$sa}/t/${e}/entry/create`,t).pipe(Object(m.a)(e=>console.log(e)),Object(v.a)(2e3),Object(O.a)(e=>({permitted:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}$initializePayment(e){return this.http.post(this.apiConfig.host+"/general-payment/initialize-transaction",e).pipe(Object(m.a)(e=>console.log(e)),Object(z.a)(3),Object(O.a)(e=>({created:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}$verifyPayment(e){return this.http.get(`${this.apiConfig.host}/general-payment/verify-transaction?reference=${e}`).pipe(Object(m.a)(e=>console.log(e)),Object(O.a)(e=>({verified:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}createRefund$(e,t){return this.http.put(`${this.apiConfig.host}/${this.$sa}/entry/${e}/refund`,t).pipe(Object(m.a)(e=>console.log(e)),Object(O.a)(e=>({refunded:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}updateEntry$(e,t,n){return this.http.put(`${this.apiConfig.host}/${this.$sa}/t/${e}/entry/${t}/detail`,n).pipe(Object(O.a)(e=>({updated:!0,$data:e})),Object(P.a)(this.handleError(this.$systemType+" Entry",null)))}$deleteManyEntry(e,t){return this.http.patch(`${this.apiConfig.host}/${this.$sa}/t/${this.ptype}/delete/entry/many`,{entries:t}).pipe(Object(O.a)(e=>({manyDeleted:!0})),Object(P.a)(this.handleError(this.$systemType+" Entries Delete",null)))}deleteAllEntry(e){return this.http.get(`${this.apiConfig.host}/${this.$sa}/t/${e}/delete/entry/all/`).pipe(Object(v.a)(2e3),Object(P.a)(this.handleError(this.$systemType+" Entry or Entries Delete",null)))}deleteAllEntry$(e){return this.http.delete(`${this.apiConfig.host}/${this.$sa}/t/$ptype/delete/entry/all/`).pipe(Object(O.a)(e=>({allDeleted:!0})),Object(P.a)(this.handleError(this.$systemType+" Entry or Entries Delete",null)))}handleError(e="operation",t){return e=>(this.ems.message=e,Object(f.a)(t))}}return e.\u0275fac=function(t){return new(t||e)(g.Tb(E.b),g.Tb(I.b),g.Tb(d.a))},e.\u0275prov=g.Gb({token:e,factory:e.\u0275fac}),e})();var x=n("9Ku7"),L=n("VKtq"),w=n("uMT1"),T=n("+ef2"),_=n("TY4h");function N(e,t){if(1&e&&(g.Pb(0,"h2"),g.xc(1),g.Ob()),2&e){const e=g.ac();g.zb(1),g.yc(" ",e.title," ")}}function k(e,t){if(1&e&&g.Lb(0,"app-view-description",5),2&e){const e=g.ac();g.gc("system-type",e.systemType)("view-type",e.view)}}function M(e,t){if(1&e&&g.Lb(0,"app-resource-unavailable",6),2&e){const e=g.ac();g.gc("error",e.error)}}const C=function(e){return["./","t",e]};function j(e,t){if(1&e&&(g.Pb(0,"li"),g.Pb(1,"a",10),g.xc(2),g.Ob(),g.Ob()),2&e){const e=t.$implicit;g.zb(1),g.gc("routerLink",g.lc(2,C,null==e?null:e.slug)),g.zb(1),g.yc(" ",null==e?null:e.name," ")}}const F=function(){return["./","verify-status"]};function S(e,t){1&e&&(g.Pb(0,"li"),g.Pb(1,"a",10),g.xc(2," Verify Payment Status "),g.Ob(),g.Ob()),2&e&&(g.zb(1),g.gc("routerLink",g.kc(1,F)))}function A(e,t){if(1&e){const e=g.Qb();g.Pb(0,"ul"),g.vc(1,j,3,4,"li",8),g.vc(2,S,3,2,"li",0),g.Pb(3,"li"),g.Pb(4,"a",9),g.Wb("click",function(){return g.rc(e),g.ac(2).loadLink(["/","account","profile"])}),g.xc(5," Profile "),g.Ob(),g.Ob(),g.Ob()}if(2&e){const e=g.ac(2);g.gc("@listAnimation",e.entries.length),g.zb(1),g.gc("ngForOf",e.entries),g.zb(1),g.gc("ngIf",e.canVerify)}}function q(e,t){if(1&e&&(g.Pb(0,"div",7),g.vc(1,A,6,3,"ul",0),g.Ob()),2&e){const e=g.ac();g.zb(1),g.gc("ngIf",null!=e.entries&&e.entries.length>0)}}let D=(()=>{class e{constructor(e,t,n,i,s,r){this.route=e,this.gps=t,this.ems=n,this.aus=i,this.router=s,this.lbs=r,this.isError=!1,this.isLoading=!1}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.dashboard.systemType,this.title=e.dashboard.title,this.view=e.dashboard.view,this.isLoading=!0,this.gps.managePayment().subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&e.length>0&&(this.isLoading=!1,this.entries=e)})}get canVerify(){return["student","departmentPresident","facultyPresident"].indexOf(this.aus.userRole)<0}loadLink(e){this.lbs.loadLink(e)}}return e.\u0275fac=function(t){return new(t||e)(g.Kb(l.a),g.Kb($),g.Kb(d.a),g.Kb(x.a),g.Kb(l.e),g.Kb(L.a))},e.\u0275cmp=g.Eb({type:e,selectors:[["app-gp-dashboard"]],features:[g.yb([d.a])],decls:5,vars:5,consts:[[4,"ngIf"],[3,"system-type","view-type",4,"ngIf"],[3,"error",4,"ngIf"],["id","dashboard",4,"ngIf"],[3,"is-loading"],[3,"system-type","view-type"],[3,"error"],["id","dashboard"],[4,"ngFor","ngForOf"],[1,"center",3,"click"],[1,"center",3,"routerLink"]],template:function(e,t){1&e&&(g.vc(0,N,2,1,"h2",0),g.vc(1,k,1,2,"app-view-description",1),g.vc(2,M,1,1,"app-resource-unavailable",2),g.vc(3,q,2,1,"div",3),g.Lb(4,"app-loading-menu",4)),2&e&&(g.gc("ngIf",t.title),g.zb(1),g.gc("ngIf",t.view),g.zb(1),g.gc("ngIf",t.isError),g.zb(1),g.gc("ngIf",t.systemType),g.zb(1),g.gc("is-loading",t.isLoading))},directives:[i.l,w.a,T.a,_.a,i.k,l.f],styles:[""],data:{animation:[p.c]}}),e})();var K=n("XA6Z");function R(e,t){if(1&e&&(g.Pb(0,"h2"),g.xc(1),g.Ob()),2&e){const e=g.ac();g.zb(1),g.yc(" ",e.entry.name," Payment ")}}function W(e,t){if(1&e&&g.Lb(0,"app-view-description",5),2&e){const e=g.ac();g.gc("system-type",e.systemType)("view-type",e.view)}}function V(e,t){if(1&e&&g.Lb(0,"app-resource-unavailable",6),2&e){const e=g.ac();g.gc("error",e.error)}}const G=function(){return["entry","create"]};function Q(e,t){if(1&e&&(g.Pb(0,"li"),g.Pb(1,"a",8),g.xc(2),g.Ob(),g.Ob()),2&e){const e=g.ac(2);g.zb(1),g.gc("routerLink",g.kc(2,G)),g.zb(1),g.yc(" Create ",e.entry.name," Entry ")}}const B=function(){return["entry","delete","all"]};function U(e,t){if(1&e&&(g.Pb(0,"li"),g.Pb(1,"a",8),g.xc(2),g.Ob(),g.Ob()),2&e){const e=g.ac(2);g.zb(1),g.gc("routerLink",g.kc(2,B)),g.zb(1),g.yc(" Delete All ",e.entry.name," Entry ")}}const Y=function(){return["entries"]},H=function(){return["../../"]};function X(e,t){if(1&e){const e=g.Qb();g.Pb(0,"div",7),g.Pb(1,"ul"),g.Pb(2,"li"),g.Pb(3,"a",8),g.xc(4),g.Ob(),g.Ob(),g.vc(5,Q,3,3,"li",0),g.Pb(6,"li"),g.Pb(7,"a",8),g.xc(8," Other Payments "),g.Ob(),g.Ob(),g.vc(9,U,3,3,"li",0),g.Pb(10,"li"),g.Pb(11,"a",9),g.Wb("click",function(){return g.rc(e),g.ac().loadLink(["/","account","profile"])}),g.xc(12," Profile "),g.Ob(),g.Ob(),g.Ob(),g.Ob()}if(2&e){const e=g.ac();g.gc("@fadeAnimation",void 0),g.zb(3),g.gc("routerLink",g.kc(6,Y)),g.zb(1),g.yc(" Manage ",e.entry.name," Entry "),g.zb(1),g.gc("ngIf",e.canCreate),g.zb(2),g.gc("routerLink",g.kc(7,H)),g.zb(2),g.gc("ngIf",e.canDeleteAll)}}let J=(()=>{class e{constructor(e,t,n,i,s,r){this.route=e,this.gps=t,this.ems=n,this.aus=i,this.router=s,this.lbs=r,this.isError=!1,this.isLoading=!1}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.dashboard.systemType,this.title=e.dashboard.title,this.view=e.dashboard.view,this.link=e.dashboard.link,this.gps.$systemType=this.systemType,this.route.paramMap.pipe(Object(K.a)(e=>{let t=e.get("payment");return this.pslug=t,this.isLoading=!0,this.gps.managePaymentEntry(t)})).subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&(this.isLoading=!1,this.entry=e)})}get canCreate(){return["student","departmentPresident","facultyPresident"].indexOf(this.aus.userRole)>-1}get canDeleteAll(){return this.aus.isSuperAdministrator}loadLink(e){this.lbs.loadLink(e)}}return e.\u0275fac=function(t){return new(t||e)(g.Kb(l.a),g.Kb($),g.Kb(d.a),g.Kb(x.a),g.Kb(l.e),g.Kb(L.a))},e.\u0275cmp=g.Eb({type:e,selectors:[["app-gp-entry-dashboard"]],features:[g.yb([d.a])],decls:5,vars:5,consts:[[4,"ngIf"],[3,"system-type","view-type",4,"ngIf"],[3,"error",4,"ngIf"],["id","dashboard",4,"ngIf"],[3,"is-loading"],[3,"system-type","view-type"],[3,"error"],["id","dashboard"],[1,"center",3,"routerLink"],[1,"center",3,"click"]],template:function(e,t){1&e&&(g.vc(0,R,2,1,"h2",0),g.vc(1,W,1,2,"app-view-description",1),g.vc(2,V,1,1,"app-resource-unavailable",2),g.vc(3,X,13,8,"div",3),g.Lb(4,"app-loading-menu",4)),2&e&&(g.gc("ngIf",t.entry&&(null==t.entry?null:t.entry.name)),g.zb(1),g.gc("ngIf",t.view),g.zb(1),g.gc("ngIf",t.isError),g.zb(1),g.gc("ngIf",t.entry),g.zb(1),g.gc("is-loading",t.isLoading))},directives:[i.l,w.a,T.a,_.a,l.f],styles:[""],data:{animation:[p.a]}}),e})();var Z=n("iPJu"),ee=n("BeQt"),te=n("9nlD");const ne=["staff","moderator","administrator","superAdministrator"];var ie=n("Rxsk"),se=n("9yhg"),re=n("xlhj"),ae=n("scZC");function ce(e,t){if(1&e&&(g.Pb(0,"h2"),g.xc(1),g.Ob()),2&e){const e=g.ac();g.zb(1),g.yc(" ",e.title,"")}}function oe(e,t){if(1&e&&g.Lb(0,"app-view-description",11),2&e){const e=g.ac();g.gc("system-type",e.systemType)("view-type",e.view)}}function le(e,t){if(1&e){const e=g.Qb();g.Pb(0,"app-notification-screen",12),g.Wb("finished",function(){return g.rc(e),g.ac().removeNotification()}),g.Ob()}if(2&e){const e=g.ac();g.gc("notified",e.notificationAvailable)("message",e.notificationMessage)}}function be(e,t){1&e&&g.Lb(0,"app-list-entry-options")}function ue(e,t){if(1&e&&g.Lb(0,"app-search",13),2&e){const e=g.ac();g.gc("system-type",e.systemType)("$link",e.$link)("search-filters",e.searchFilters)}}function ye(e,t){1&e&&(g.Pb(0,"td",20),g.xc(1," N/A "),g.Ob())}function pe(e,t){if(1&e&&(g.Pb(0,"td",27),g.xc(1),g.Ob()),2&e){const e=g.ac().$implicit;g.zb(1),g.yc(" ",null==e?null:e.payment_reference," ")}}function ge(e,t){if(1&e&&(g.Pb(0,"td",20),g.xc(1),g.Ob()),2&e){const e=g.ac().$implicit;g.zb(1),g.yc(" ",null==e?null:e.full_name," ")}}function he(e,t){if(1&e&&(g.Pb(0,"td",20),g.xc(1),g.Ob()),2&e){const e=g.ac().$implicit;g.zb(1),g.yc(" ",null==e?null:e.payment_session," ")}}function de(e,t){if(1&e&&(g.Pb(0,"td",20),g.xc(1),g.Ob()),2&e){const e=g.ac().$implicit;g.zb(1),g.yc(" ",null==e?null:e.department," ")}}function fe(e,t){if(1&e&&(g.Pb(0,"td",20),g.xc(1),g.bc(2,"date"),g.Ob()),2&e){const e=g.ac().$implicit;g.zb(1),g.yc(" ",g.dc(2,1,null==e?null:e.paid_on,"longDate")," ")}}const me=function(){return{}};function ve(e,t){if(1&e&&(g.Pb(0,"td",28),g.xc(1),g.Ob()),2&e){const e=g.ac().$implicit;g.gc("ngClass",g.kc(2,me)),g.zb(1),g.yc(" ",null==e?null:e.status," ")}}function Pe(e,t){if(1&e){const e=g.Qb();g.Nb(0),g.Pb(1,"input",33,34),g.Wb("click",function(){g.rc(e);const t=g.qc(2),n=g.ac(3),i=n.$implicit,s=n.index;return g.ac(3).addEntryToDeleteList(null==i?null:i.num,t.checked,s)}),g.Ob(),g.Lb(3,"span",35),g.Mb()}if(2&e){const e=t.$implicit,n=g.ac(3).$implicit;g.zb(1),g.gc("checked",e==(null==n?null:n.num))}}function Oe(e,t){if(1&e&&(g.Nb(0),g.vc(1,Pe,4,1,"ng-container",32),g.Mb()),2&e){const e=g.ac(5);g.zb(1),g.gc("ngForOf",e.esdl)}}function ze(e,t){if(1&e){const e=g.Qb();g.Pb(0,"input",36,34),g.Wb("click",function(){g.rc(e);const t=g.qc(1),n=g.ac(2),i=n.$implicit,s=n.index;return g.ac(3).addEntryToDeleteList(null==i?null:i.num,t.checked,s)}),g.Ob(),g.Lb(2,"span",35)}}function Ie(e,t){if(1&e&&(g.Pb(0,"label",29),g.vc(1,Oe,2,1,"ng-container",30),g.vc(2,ze,3,0,"ng-template",null,31,g.wc),g.Ob()),2&e){const e=g.qc(3),t=g.ac(4);g.zb(1),g.gc("ngIf",t.esdl.length)("ngIfElse",e)}}const Ee=function(e){return["../","entry",e,"detail"]};function $e(e,t){if(1&e&&(g.Pb(0,"tr"),g.Pb(1,"td",20),g.xc(2),g.Ob(),g.vc(3,ye,2,0,"ng-template",null,21,g.wc),g.vc(5,pe,2,1,"td",22),g.vc(6,ge,2,1,"td",23),g.vc(7,he,2,1,"td",23),g.vc(8,de,2,1,"td",23),g.vc(9,fe,3,4,"td",23),g.vc(10,ve,2,3,"td",24),g.Pb(11,"td",16),g.Pb(12,"a",25),g.xc(13," View "),g.Ob(),g.vc(14,Ie,4,2,"label",26),g.Ob(),g.Ob()),2&e){const e=t.$implicit,n=t.index,i=g.qc(4),s=g.ac(3);g.zb(2),g.yc(" ",n+1,". "),g.zb(3),g.gc("ngIf",null==e?null:e.payment_reference)("ngIfElse",i),g.zb(1),g.gc("ngIf",null==e?null:e.full_name)("ngIfElse",i),g.zb(1),g.gc("ngIf",null==e?null:e.payment_session)("ngIfElse",i),g.zb(1),g.gc("ngIf",null==e?null:e.department)("ngIfElse",i),g.zb(1),g.gc("ngIf",null==e?null:e.paid_on)("ngIfElse",i),g.zb(1),g.gc("ngIf",null==e?null:e.status)("ngIfElse",i),g.zb(2),g.gc("routerLink",g.lc(15,Ee,null==e?null:e.slug)),g.zb(2),g.gc("ngIf",s.canUpdateEntry)}}function xe(e,t){if(1&e&&(g.Pb(0,"table"),g.Pb(1,"caption",15),g.xc(2," Entries "),g.Ob(),g.Pb(3,"colgroup"),g.Lb(4,"col",16),g.Lb(5,"col",16),g.Lb(6,"col",16),g.Lb(7,"col",16),g.Lb(8,"col",16),g.Lb(9,"col",16),g.Lb(10,"col",16),g.Lb(11,"col",16),g.Ob(),g.Pb(12,"thead"),g.Pb(13,"tr"),g.Pb(14,"th",17),g.xc(15," Index "),g.Ob(),g.Pb(16,"th",17),g.xc(17," Payment Ref. No. "),g.Ob(),g.Pb(18,"th",17),g.xc(19," Full Name "),g.Ob(),g.Pb(20,"th",17),g.xc(21," Session "),g.Ob(),g.Pb(22,"th",17),g.xc(23," Department "),g.Ob(),g.Pb(24,"th",17),g.xc(25," Paid On "),g.Ob(),g.Pb(26,"th",17),g.xc(27," Status "),g.Ob(),g.Pb(28,"th",18),g.xc(29," Changes "),g.Ob(),g.Ob(),g.Ob(),g.Pb(30,"tbody"),g.vc(31,$e,15,17,"tr",19),g.Ob(),g.Pb(32,"tfoot"),g.Pb(33,"tr"),g.Lb(34,"td"),g.Ob(),g.Pb(35,"tr"),g.Lb(36,"td"),g.Ob(),g.Lb(37,"tr"),g.Ob(),g.Ob()),2&e){const e=g.ac(2);g.zb(30),g.gc("@listAnimation",e.entries.length),g.zb(1),g.gc("ngForOf",e.entries)("ngForTrackBy",e.trackByPaymentRef)}}function Le(e,t){if(1&e&&(g.Pb(0,"div",14),g.vc(1,xe,38,3,"table",1),g.Ob()),2&e){const e=g.ac();g.gc("@fadeAnimation",void 0),g.zb(1),g.gc("ngIf",!e.isLoading)}}function we(e,t){if(1&e&&g.Lb(0,"app-pagination",37),2&e){const e=g.ac();g.gc("entries-length",e.$entriesLength)("entry-ref",e.$entryRef)("page-number",e.pageNumber)("is-loading",!e.isLoading)}}function Te(e,t){if(1&e&&g.Lb(0,"app-resource-unavailable",38),2&e){const e=g.ac();g.gc("error",e.error)}}let _e=(()=>{class e{constructor(e,t,n,i,s,r,a,c){this.route=e,this.location=t,this.gps=n,this.gss=i,this.gas=s,this.ems=r,this.ns=a,this.aus=c,this.entries=[],this.isError=!1,this.esdl=[],this.p$esdl=!1,this.pageNumber=1,this.$entriesLength=0,this.isLoading=!1,this.entriesSearchedOb=this.gss.entriesSearched$.subscribe(e=>{this.location.replaceState(`/general-payment/t/${this.pslug}/entries`),this.pageNumber=1,null==e?(this.entries=[],this.$entriesLength=0,this.error=Object.assign({resource:this.systemType+" Entry or Entries"},this.ems.message),this.isError=!0):null!=e&&e.length>0&&(this.error=null,this.isError=!1,this.$entriesLength=e.length,this.entries=e,this.entries.length<=10&&(this.pageNumber=1),this.entries.length>10&&this.entries.pop())}),this.clearSearchOb=this.gss.clearSearch$.subscribe(e=>{this.clearSearch$()}),this.errorExistOb=this.gss.errorExist$.subscribe(e=>{this.isError=e})}searchErr$(e){this.error=null,this.isError=!1}clearSearch$(){this.error=null,this.isError=!1,this.pageNumber=1,this.location.replaceState(`/general-payment/t/${this.pslug}/entries`),this.gss.searchCleared.next(!0),this.isLoading=!0,this.getAllEntry({})}trackByPaymentRef(e,t){return t.payment_reference}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.entries.systemType,this.title=e.entries.title,this.view=e.entries.view,this.link=e.entries.link,this.searchFilters=e.entries.searchFilters,this.gps.$systemType=this.systemType,this.route.queryParamMap.subscribe(e=>{let t=this.route.snapshot.paramMap,n=this.gas.paramProcessor(e,this);return this.pslug=t.get("payment"),this.$link="general-payment/t/"+this.pslug,this.gps.ptype=this.pslug,this.isLoading=!0,this.getAllEntry(n)})}ngOnDestroy(){null!=this.entriesSearchedOb&&this.entriesSearchedOb.unsubscribe(),null!=this.clearSearchOb&&this.clearSearchOb.unsubscribe(),null!=this.errorExistOb&&this.errorExistOb.unsubscribe()}getAllEntry(e){this.gps.getAllEntry(e).subscribe(e=>{null==e?(this.isLoading=!1,this.entries=[],this.$entriesLength=0,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry or Entries"},this.ems.message)):null!=e&&e.length>0&&(this.isLoading=!1,this.error=null,this.isError=!1,this.$entriesLength=e.length,this.entries=e),this.entries.length>10&&this.entries.pop()})}addEntryToDeleteList(e,t,n){this.gas.addEntryToDeleteList(e,t,n,this)}deleteManyEntry(){this.gas.deleteManyEntry(this,this.gps)}get userRole(){return this.aus.userRole}get canUpdateEntry(){return ne.indexOf(this.userRole)>-1}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}removeNotification(){this.ns.removeNotification()}}return e.\u0275fac=function(t){return new(t||e)(g.Kb(l.a),g.Kb(i.h),g.Kb($),g.Kb(Z.a),g.Kb(ee.a),g.Kb(d.a),g.Kb(te.a),g.Kb(x.a))},e.\u0275cmp=g.Eb({type:e,selectors:[["app-gp-entries"]],features:[g.yb([te.a,d.a,Z.a,ee.a])],decls:13,vars:12,consts:[["id","entry-main"],[4,"ngIf"],[3,"system-type","view-type",4,"ngIf"],[3,"notified","message","finished",4,"ngIf"],[1,"search-bar"],[3,"system-type","$link","search-filters",4,"ngIf"],[1,"entry-option-delete","entry-option-small","center",3,"click"],["class","entries",4,"ngIf"],[3,"entries-length","entry-ref","page-number","is-loading",4,"ngIf"],[3,"error",4,"ngIf"],[3,"is-loading"],[3,"system-type","view-type"],[3,"notified","message","finished"],[3,"system-type","$link","search-filters"],[1,"entries"],[1,"bold","left"],[1,""],[1,"bold","center"],[1,"bold","left","changes-head"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"center"],["nilValue",""],["class","center bold payment-ref",4,"ngIf","ngIfElse"],["class","center",4,"ngIf","ngIfElse"],["class","center",3,"ngClass",4,"ngIf","ngIfElse"],[1,"center","changes-option","changes-option-full",3,"routerLink"],["class","changes-mark",4,"ngIf"],[1,"center","bold","payment-ref"],[1,"center",3,"ngClass"],[1,"changes-mark"],[4,"ngIf","ngIfElse"],["normalChecks",""],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","click"],["checked",""],[1,"checkmark"],["type","checkbox",3,"click"],[3,"entries-length","entry-ref","page-number","is-loading"],[3,"error"]],template:function(e,t){1&e&&(g.Pb(0,"div",0),g.vc(1,ce,2,1,"h2",1),g.vc(2,oe,1,2,"app-view-description",2),g.vc(3,le,1,2,"app-notification-screen",3),g.vc(4,be,1,0,"app-list-entry-options",1),g.Pb(5,"div",4),g.vc(6,ue,1,3,"app-search",5),g.Pb(7,"a",6),g.Wb("click",function(){return t.deleteManyEntry()}),g.xc(8," Delete Many "),g.Ob(),g.Ob(),g.vc(9,Le,2,2,"div",7),g.vc(10,we,1,4,"app-pagination",8),g.vc(11,Te,1,1,"app-resource-unavailable",9),g.Ob(),g.Lb(12,"app-loading-menu",10)),2&e&&(g.gc("@fadeAnimation",void 0),g.zb(1),g.gc("ngIf",t.title),g.zb(1),g.gc("ngIf",t.view),g.zb(1),g.gc("ngIf",t.notificationAvailable),g.zb(1),g.gc("ngIf",t.$entriesLength>0),g.zb(2),g.gc("ngIf",t.systemType),g.zb(1),g.Cb("hide",t.esdl.length<2),g.zb(2),g.gc("ngIf",t.$entriesLength>0),g.zb(1),g.gc("ngIf",t.pageNumber),g.zb(1),g.gc("ngIf",t.isError),g.zb(1),g.gc("is-loading",t.isLoading))},directives:[i.l,w.a,T.a,ie.a,se.a,re.a,i.k,l.f,i.j,ae.a,_.a],pipes:[i.d],styles:['.entries[_ngcontent-%COMP%]{width:98%;overflow:auto}table[_ngcontent-%COMP%]{width:1270px;table-layout:fixed}col[_ngcontent-%COMP%]:first-of-type{width:5%}col[_ngcontent-%COMP%]:nth-of-type(2){width:16%}col[_ngcontent-%COMP%]:nth-of-type(3){width:12%}col[_ngcontent-%COMP%]:nth-of-type(4){width:8%}col[_ngcontent-%COMP%]:nth-of-type(5){width:20%}col[_ngcontent-%COMP%]:nth-of-type(6){width:8%}col[_ngcontent-%COMP%]:nth-of-type(7){width:7%}col[_ngcontent-%COMP%]:nth-of-type(8){width:20%}@media screen and (max-width:700px){.entries[_ngcontent-%COMP%]{width:98%;overflow:hidden}.app-number[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]{table-layout:auto}tr[_ngcontent-%COMP%]{margin-bottom:10px;display:block}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{display:none}td[_ngcontent-%COMP%]{text-align:left;line-height:2em}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{font-family:RobotoBold;font-size:96%;font-weight:700}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child:before{content:"Entry Index"}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2):before{content:"Reference Number : "}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4):before{content:"Session : "}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7):before{content:"Status : "}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8):before{content:"Options : "}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:nth-child(2), td[_ngcontent-%COMP%]:nth-child(4), td[_ngcontent-%COMP%]:nth-child(7), td[_ngcontent-%COMP%]:nth-child(8){display:block}}'],data:{animation:[p.c,p.a]}}),e})();function Ne(e,t){if(1&e&&(g.Pb(0,"h2"),g.xc(1),g.Ob()),2&e){const e=g.ac();g.zb(1),g.yc(" ",e.title," Detail ")}}function ke(e,t){if(1&e&&g.Lb(0,"app-view-description",7),2&e){const e=g.ac();g.gc("view-type",e.view)("system-type",e.systemType)}}function Me(e,t){if(1&e&&g.Lb(0,"app-resource-unavailable",8),2&e){const e=g.ac();g.gc("error",e.error)}}function Ce(e,t){if(1&e){const e=g.Qb();g.Pb(0,"app-notification-screen",9),g.Wb("finished",function(){return g.rc(e),g.ac().removeNotification()}),g.Ob()}if(2&e){const e=g.ac();g.gc("notified",e.notificationAvailable)("message",e.notificationMessage)}}function je(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",15),g.xc(3," Profile Photo : "),g.Ob(),g.Pb(4,"td",16),g.Lb(5,"img",17),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.hc("src",null==e.entry?null:e.entry.profile_photo,g.sc),g.hc("alt",e.systemType),g.gc("title",e.systemType)}}function Fe(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Reference Number : "),g.Ob(),g.Pb(4,"td"),g.Pb(5,"b",19),g.xc(6),g.Ob(),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(6),g.yc(" ",null==e.entry?null:e.entry.payment_reference," ")}}function Se(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Paid Date : "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.bc(6,"date"),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",g.dc(6,1,null==e.entry?null:e.entry.paid_on,"fullDate")," ")}}function Ae(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Payment Session "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry?null:e.entry.payment_session," ")}}function qe(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Amount "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" N = ",null==e.entry?null:e.entry.amount," ")}}function De(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Name "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry?null:e.entry.full_name," ")}}function Ke(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Email Address "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry?null:e.entry.email_address," ")}}function Re(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Phone Number "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry?null:e.entry.phone_number," ")}}function We(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Payment Description "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry?null:e.entry.description," ")}}function Ve(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Full Name : "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry||null==e.entry.author?null:e.entry.author.full_name," ")}}function Ge(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Matriculation Number : "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry||null==e.entry.author?null:e.entry.author.matriculation_number," ")}}function Qe(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Identification Number : "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry||null==e.entry.author?null:e.entry.author.identity_number," ")}}function Be(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Department "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry?null:e.entry.department_name," ")}}function Ue(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Faculty "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry?null:e.entry.faculty_name," ")}}function Ye(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Level : "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",null==e.entry||null==e.entry.author?null:e.entry.author.level," ")}}function He(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",18),g.xc(3," Status : "),g.Ob(),g.Pb(4,"td"),g.xc(5),g.bc(6,"titlecase"),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.yc(" ",g.cc(6,1,null==e.entry?null:e.entry.status)," ")}}function Xe(e,t){if(1&e&&(g.Nb(0),g.Pb(1,"tr"),g.Pb(2,"th",15),g.xc(3," Signature : "),g.Ob(),g.Pb(4,"td",20),g.Lb(5,"img",17),g.Ob(),g.Ob(),g.Mb()),2&e){const e=g.ac(3);g.zb(5),g.hc("src",null==e.entry?null:e.entry.signature,g.sc),g.hc("alt",e.systemType),g.gc("title",e.systemType)}}function Je(e,t){1&e&&(g.Nb(0),g.Pb(1,"td",12),g.Pb(2,"button",21),g.xc(3," Print "),g.Ob(),g.Ob(),g.Mb())}function Ze(e,t){if(1&e){const e=g.Qb();g.Pb(0,"td",22),g.Pb(1,"button",23),g.Wb("click",function(){return g.rc(e),g.ac(3).refundEntry()}),g.xc(2," Refund "),g.Ob(),g.Ob()}}function et(e,t){if(1&e){const e=g.Qb();g.Pb(0,"td",22),g.Pb(1,"button",23),g.Wb("click",function(){return g.rc(e),g.ac(3).refundEntry()}),g.xc(2," Refund "),g.Ob(),g.Ob()}}function tt(e,t){if(1&e){const e=g.Qb();g.Nb(0),g.Pb(1,"td",12),g.Pb(2,"button",24),g.Wb("click",function(){return g.rc(e),g.ac(3).requeryTransaction()}),g.xc(3," Requery Transaction "),g.Ob(),g.Ob(),g.Mb()}}function nt(e,t){if(1&e&&(g.Pb(0,"table"),g.Pb(1,"colgroup"),g.Lb(2,"col",11),g.Lb(3,"col"),g.Ob(),g.Pb(4,"tbody"),g.vc(5,je,6,3,"ng-container",1),g.vc(6,Fe,7,1,"ng-container",1),g.vc(7,Se,7,4,"ng-container",1),g.vc(8,Ae,6,1,"ng-container",1),g.vc(9,qe,6,1,"ng-container",1),g.Pb(10,"tr"),g.Pb(11,"th",12),g.Pb(12,"h3",13),g.xc(13," Payer Detail "),g.Ob(),g.Lb(14,"hr"),g.Ob(),g.Ob(),g.vc(15,De,6,1,"ng-container",1),g.vc(16,Ke,6,1,"ng-container",1),g.vc(17,Re,6,1,"ng-container",1),g.vc(18,We,6,1,"ng-container",1),g.Pb(19,"tr"),g.Pb(20,"th",12),g.Pb(21,"h3",13),g.xc(22," Student Detail "),g.Ob(),g.Lb(23,"hr"),g.Ob(),g.Ob(),g.vc(24,Ve,6,1,"ng-container",1),g.vc(25,Ge,6,1,"ng-container",1),g.vc(26,Qe,6,1,"ng-container",1),g.vc(27,Be,6,1,"ng-container",1),g.vc(28,Ue,6,1,"ng-container",1),g.vc(29,Ye,6,1,"ng-container",1),g.vc(30,He,7,3,"ng-container",1),g.vc(31,Xe,6,3,"ng-container",1),g.vc(32,Je,4,0,"ng-container",1),g.Ob(),g.Pb(33,"tfoot"),g.vc(34,Ze,3,0,"td",14),g.vc(35,et,3,0,"td",14),g.vc(36,tt,4,0,"ng-container",1),g.Ob(),g.Ob()),2&e){const e=g.ac(2);g.zb(5),g.gc("ngIf",null==e.entry?null:e.entry.profile_photo),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.payment_reference),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.paid_on),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.payment_session),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.amount),g.zb(6),g.gc("ngIf",null==e.entry?null:e.entry.full_name),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.email_address),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.phone_number),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.description),g.zb(6),g.gc("ngIf",null==e.entry||null==e.entry.author?null:e.entry.author.full_name),g.zb(1),g.gc("ngIf",(null==e.entry?null:e.entry.author)&&(null==e.entry||null==e.entry.author?null:e.entry.author.matriculation_number)),g.zb(1),g.gc("ngIf",(null==e.entry?null:e.entry.author)&&(null==e.entry||null==e.entry.author?null:e.entry.author.identity_number)),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.department_name),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.faculty_name),g.zb(1),g.gc("ngIf",null==e.entry||null==e.entry.author?null:e.entry.author.level),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.status),g.zb(1),g.gc("ngIf",null==e.entry?null:e.entry.signature),g.zb(1),g.gc("ngIf",!0),g.zb(2),g.gc("ngIf","facultyPresident"==e.userRole&&e.entry.faculty==e.userFaculty&&"Success"==e.entry.status),g.zb(1),g.gc("ngIf","departmentPresident"==e.userRole&&e.entry.department==e.userDepartment&&"Success"==e.entry.status),g.zb(1),g.gc("ngIf","Failed"==e.entry.status||"Pending"==e.entry.status)}}function it(e,t){if(1&e&&(g.Pb(0,"div",10),g.vc(1,nt,37,21,"table",1),g.Ob()),2&e){const e=g.ac();g.zb(1),g.gc("ngIf",!e.isLoading)}}let st=(()=>{class e{constructor(e,t,n,i,s,r){this.router=e,this.route=t,this.gps=n,this.ns=i,this.ems=s,this.aus=r,this.isError=!1,this.isFormSubmitted=!1,this.isFormProcessing=!1,this.isLoading=!1}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.detail.systemType,this.title=e.detail.title,this.view=e.detail.view,this.viewWord=e.detail.viewWord,this.link=e.detail.link,this.gps.$systemType=this.systemType,this.gps.$sa=e.detail.$link,this.route.paramMap.pipe(Object(K.a)(e=>{let t=e.get("entry"),n=e.get("payment");return this.pslug=n,this.eslug=t,this.isLoading=!0,this.gps.getEntry(n,t)})).subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&(this.isLoading=!1,this.entry=e)})}ngOnDestroy(){clearTimeout(this.entryChangesT)}refundEntry(){this.gps.createRefund$(this.eslug,{transaction:this.entry.payment_reference}).subscribe(e=>{null==e?(this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is unsuccessful and ${this.systemType} is not refunded.`)):null!=e&&1==e.refunded&&(this.isLoading=!0,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is successful and ${this.systemType} is refunded.`),this.$entryChanges(e.$data))})}requeryTransaction(){this.isLoading=!0,this.gps.$verifyPayment(this.entry.payment_reference).subscribe(e=>{null==e?(this.isLoading=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is unsuccessful and ${this.systemType} is not updated.`)):null!=e&&1==e.verified&&(this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is successful and ${this.systemType} is updated.`),this.$entryDetail(e.$data))})}$entryDetail(e){this.entryChangesT=setTimeout(()=>window.location.href=`${window.location.origin}/general-payment/t/${this.pslug}/entry/${this.eslug}/detail`,3e3)}$entryChanges(e){this.entryChangesT=setTimeout(()=>this.router.navigate(["general-payment","t",this.pslug,"entries"]),5e3)}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}get userRole(){return this.aus.userRole}get userDepartment(){return this.aus.userDepartment}get userFaculty(){return this.aus.userFaculty}get canUpdateEntry(){return ne.indexOf(this.userRole)>-1}get isFormValid(){return this.entryForm.valid}removeNotification(){this.ns.removeNotification()}}return e.\u0275fac=function(t){return new(t||e)(g.Kb(l.e),g.Kb(l.a),g.Kb($),g.Kb(te.a),g.Kb(d.a),g.Kb(x.a))},e.\u0275cmp=g.Eb({type:e,selectors:[["app-gp-entry-detail"]],features:[g.yb([te.a,d.a])],decls:7,vars:7,consts:[["id","general-payment"],[4,"ngIf"],[3,"view-type","system-type",4,"ngIf"],[3,"error",4,"ngIf"],[3,"notified","message","finished",4,"ngIf"],["id","gp-details",4,"ngIf"],[3,"is-loading"],[3,"view-type","system-type"],[3,"error"],[3,"notified","message","finished"],["id","gp-details"],[1,"payment-parameters"],["colspan","2"],[1,"left"],["colspan","2","class","refund option",4,"ngIf"],[1,"bold","left"],[1,"profilePhoto"],[3,"src","alt","title"],[1,"left","bold"],[1,"bold"],[1,"signature"],["href","#","onclick","print()",1,"entry-option","center"],["colspan","2",1,"refund","option"],[1,"entry-option","center",3,"click"],["href","#",1,"entry-option","center",3,"click"]],template:function(e,t){1&e&&(g.Pb(0,"div",0),g.vc(1,Ne,2,1,"h2",1),g.vc(2,ke,1,2,"app-view-description",2),g.vc(3,Me,1,1,"app-resource-unavailable",3),g.vc(4,Ce,1,2,"app-notification-screen",4),g.vc(5,it,2,1,"div",5),g.Ob(),g.Lb(6,"app-loading-menu",6)),2&e&&(g.gc("@fadeAnimation",void 0),g.zb(1),g.gc("ngIf",t.title),g.zb(1),g.gc("ngIf",t.view),g.zb(1),g.gc("ngIf",t.isError),g.zb(1),g.gc("ngIf",t.notificationAvailable),g.zb(1),g.gc("ngIf",t.entry),g.zb(1),g.gc("is-loading",t.isLoading))},directives:[i.l,w.a,T.a,_.a,ie.a],pipes:[i.d,i.r],styles:["#gp-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:70%}"],data:{animation:[p.a]}}),e})();var rt=n("inDW");const at=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/;let ct=(()=>{class e{constructor(e){this.fb=e}$entryForm(){return this.fb.group({payerName:["",{validators:[s.q.required,s.q.minLength(4),s.q.maxLength(40)]}],payerEmail:["",{validators:[s.q.required,s.q.minLength(4),s.q.maxLength(40),Object(rt.a)(at)]}],payerPhone:["",{validators:[s.q.required,s.q.minLength(10),s.q.maxLength(14),e=>{let t=e.value;return t.startsWith("+234")&&t.length>14?{payerPhoneIntl:{value:t}}:!t.startsWith("+234")&&t.length>11?{payerPhone:{value:t}}:null}]}],description:["",{validators:[s.q.required,s.q.minLength(9),s.q.maxLength(200)]}],payment_type:["",{validators:[s.q.required,s.q.max(9e8)]}],payment_session:["",{validators:[s.q.required,s.q.max(9e8)]}],amount:["",{validators:[s.q.required,s.q.minLength(2),s.q.maxLength(8)]}]})}searchForm(e){return new s.d("",[Object(rt.d)(e)])}}return e.\u0275fac=function(t){return new(t||e)(g.Tb(s.c))},e.\u0275prov=g.Gb({token:e,factory:e.\u0275fac}),e})();function ot(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Name of ",e.systemType," should be provided and cannot be empty ")}}function lt(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Name of ",e.systemType," cannot be less than 4 characters in length ")}}function bt(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Name of ",e.systemType," cannot be greater than 40 characters in length ")}}function ut(e,t){if(1&e&&(g.Pb(0,"div",2),g.Pb(1,"ul"),g.vc(2,ot,2,1,"li",0),g.vc(3,lt,2,1,"li",0),g.vc(4,bt,2,1,"li",0),g.Ob(),g.Ob()),2&e){const e=g.ac(2);g.gc("@fadeAnimation",void 0),g.zb(2),g.gc("ngIf",null==e.payerName.errors?null:e.payerName.errors.required),g.zb(1),g.gc("ngIf",(null==e.payerName.errors?null:e.payerName.errors.required)||(null==e.payerName.errors?null:e.payerName.errors.minlength)),g.zb(1),g.gc("ngIf",(null==e.payerName.errors?null:e.payerName.errors.required)||(null==e.payerName.errors?null:e.payerName.errors.maxlength))}}function yt(e,t){if(1&e&&(g.Nb(0),g.vc(1,ut,5,4,"div",1),g.Mb()),2&e){const e=g.ac();g.zb(1),g.gc("ngIf",e.payerName.invalid&&(e.payerName.touched||e.payerName.dirty))}}function pt(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Email Address of ",e.systemType," should be provided and cannot be empty ")}}function gt(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Email Address of ",e.systemType," cannot be less than 4 characters in length ")}}function ht(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Email Address of ",e.systemType," cannot be greater than 40 characters in length ")}}function dt(e,t){1&e&&(g.Pb(0,"li"),g.xc(1," Payer Email Address should be valid and should conform to standards for example david@gmail.com "),g.Ob())}function ft(e,t){if(1&e&&(g.Pb(0,"div",2),g.Pb(1,"ul"),g.vc(2,pt,2,1,"li",0),g.vc(3,gt,2,1,"li",0),g.vc(4,ht,2,1,"li",0),g.vc(5,dt,2,0,"li",0),g.Ob(),g.Ob()),2&e){const e=g.ac(2);g.gc("@fadeAnimation",void 0),g.zb(2),g.gc("ngIf",null==e.payerEmail.errors?null:e.payerEmail.errors.required),g.zb(1),g.gc("ngIf",(null==e.payerEmail.errors?null:e.payerEmail.errors.required)||(null==e.payerEmail.errors?null:e.payerEmail.errors.minlength)),g.zb(1),g.gc("ngIf",(null==e.payerEmail.errors?null:e.payerEmail.errors.required)||(null==e.payerEmail.errors?null:e.payerEmail.errors.maxlength)),g.zb(1),g.gc("ngIf",(null==e.payerEmail.errors?null:e.payerEmail.errors.required)||(null==e.payerEmail.errors?null:e.payerEmail.errors.emailAddress))}}function mt(e,t){if(1&e&&(g.Nb(0),g.vc(1,ft,6,5,"div",1),g.Mb()),2&e){const e=g.ac();g.zb(1),g.gc("ngIf",e.payerEmail.invalid&&(e.payerEmail.touched||e.payerEmail.dirty))}}function vt(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Phone Number of ",e.systemType," should be provided and cannot be empty ")}}function Pt(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Phone Number of ",e.systemType," cannot be less than 10 characters in length ")}}function Ot(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Phone Number of ",e.systemType," cannot be greater than 14 characters in length ")}}function zt(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Phone Number of ",e.systemType," if starting with +234 before the last 10 digits should not be greater than 13 characters in length ")}}function It(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Payer Phone Number of ",e.systemType," if not starting with +234 before the last 10 digits should not be greater than 11 characters in length ")}}function Et(e,t){if(1&e&&(g.Pb(0,"div",2),g.Pb(1,"ul"),g.vc(2,vt,2,1,"li",0),g.vc(3,Pt,2,1,"li",0),g.vc(4,Ot,2,1,"li",0),g.vc(5,zt,2,1,"li",0),g.vc(6,It,2,1,"li",0),g.Ob(),g.Ob()),2&e){const e=g.ac(2);g.gc("@fadeAnimation",void 0),g.zb(2),g.gc("ngIf",null==e.payerPhone.errors?null:e.payerPhone.errors.required),g.zb(1),g.gc("ngIf",(null==e.payerPhone.errors?null:e.payerPhone.errors.required)||(null==e.payerPhone.errors?null:e.payerPhone.errors.minlength)),g.zb(1),g.gc("ngIf",(null==e.payerPhone.errors?null:e.payerPhone.errors.required)||(null==e.payerPhone.errors?null:e.payerPhone.errors.maxlength)),g.zb(1),g.gc("ngIf",(null==e.payerPhone.errors?null:e.payerPhone.errors.required)||(null==e.payerPhone.errors?null:e.payerPhone.errors.payerPhoneIntl)),g.zb(1),g.gc("ngIf",(null==e.payerPhone.errors?null:e.payerPhone.errors.required)||(null==e.payerPhone.errors?null:e.payerPhone.errors.payerPhone))}}function $t(e,t){if(1&e&&(g.Nb(0),g.vc(1,Et,7,6,"div",1),g.Mb()),2&e){const e=g.ac();g.zb(1),g.gc("ngIf",e.payerPhone.invalid&&(e.payerPhone.touched||e.payerPhone.dirty))}}function xt(e,t){1&e&&(g.Pb(0,"li"),g.xc(1," Description of Payment should be provided and cannot be empty "),g.Ob())}function Lt(e,t){1&e&&(g.Pb(0,"li"),g.xc(1," Description of Payment cannot be less than 4 characters in length "),g.Ob())}function wt(e,t){1&e&&(g.Pb(0,"li"),g.xc(1," Description of Payment cannot be greater than 100 characters in length "),g.Ob())}function Tt(e,t){if(1&e&&(g.Pb(0,"div",2),g.Pb(1,"ul"),g.vc(2,xt,2,0,"li",0),g.vc(3,Lt,2,0,"li",0),g.vc(4,wt,2,0,"li",0),g.Ob(),g.Ob()),2&e){const e=g.ac(2);g.gc("@fadeAnimation",void 0),g.zb(2),g.gc("ngIf",null==e.description.errors?null:e.description.errors.required),g.zb(1),g.gc("ngIf",(null==e.description.errors?null:e.description.errors.required)||(null==e.description.errors?null:e.description.errors.minlength)),g.zb(1),g.gc("ngIf",(null==e.description.errors?null:e.description.errors.required)||(null==e.description.errors?null:e.description.errors.maxlength))}}function _t(e,t){if(1&e&&(g.Nb(0),g.vc(1,Tt,5,4,"div",1),g.Mb()),2&e){const e=g.ac();g.zb(1),g.gc("ngIf",e.description.invalid&&(e.description.touched||e.description.dirty))}}function Nt(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Amount of ",e.systemType," should be provided and cannot be empty ")}}function kt(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Amount of ",e.systemType," cannot be less than 2 characters in length ")}}function Mt(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(3);g.zb(1),g.yc(" Amount of ",e.systemType," cannot be greater than 8 characters in length ")}}function Ct(e,t){if(1&e&&(g.Pb(0,"div",2),g.Pb(1,"ul"),g.vc(2,Nt,2,1,"li",0),g.vc(3,kt,2,1,"li",0),g.vc(4,Mt,2,1,"li",0),g.Ob(),g.Ob()),2&e){const e=g.ac(2);g.gc("@fadeAnimation",void 0),g.zb(2),g.gc("ngIf",null==e.amt.errors?null:e.amt.errors.required),g.zb(1),g.gc("ngIf",(null==e.amt.errors?null:e.amt.errors.required)||(null==e.amt.errors?null:e.amt.errors.minlength)),g.zb(1),g.gc("ngIf",(null==e.amt.errors?null:e.amt.errors.required)||(null==e.amt.errors?null:e.amt.errors.maxlength))}}function jt(e,t){if(1&e&&(g.Nb(0),g.vc(1,Ct,5,4,"div",1),g.Mb()),2&e){const e=g.ac();g.zb(1),g.gc("ngIf",e.amt.invalid&&(e.amt.touched||e.amt.dirty))}}let Ft=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Eb({type:e,selectors:[["app-gp-entry-create-validator"]],inputs:{systemType:["system-type","systemType"],payerName:["payer-name","payerName"],payerEmail:["payer-email","payerEmail"],payerPhone:["payer-phone","payerPhone"],description:"description",amt:"amt"},decls:5,vars:5,consts:[[4,"ngIf"],["class","validation-error",4,"ngIf"],[1,"validation-error"]],template:function(e,t){1&e&&(g.vc(0,yt,2,1,"ng-container",0),g.vc(1,mt,2,1,"ng-container",0),g.vc(2,$t,2,1,"ng-container",0),g.vc(3,_t,2,1,"ng-container",0),g.vc(4,jt,2,1,"ng-container",0)),2&e&&(g.gc("ngIf",t.payerName),g.zb(1),g.gc("ngIf",t.payerEmail),g.zb(1),g.gc("ngIf",t.payerPhone),g.zb(1),g.gc("ngIf",t.description),g.zb(1),g.gc("ngIf",t.amt))},directives:[i.l],styles:[""],data:{animation:[p.a]}}),e})();function St(e,t){if(1&e&&g.Lb(0,"app-view-description",7),2&e){const e=g.ac();g.gc("view-description",e.view)("system-type",e.systemType)}}function At(e,t){if(1&e&&g.Lb(0,"app-guidelines",8),2&e){const e=g.ac();g.gc("view",e.view)("system-guideline",e.systemGuideline)}}function qt(e,t){if(1&e&&g.Lb(0,"app-resource-unavailable",9),2&e){const e=g.ac();g.gc("error",e.error)}}function Dt(e,t){if(1&e){const e=g.Qb();g.Pb(0,"app-notification-screen",10),g.Wb("finished",function(){return g.rc(e),g.ac().removeNotification()}),g.Ob()}if(2&e){const e=g.ac();g.gc("notified",e.notificationAvailable)("message",e.notificationMessage)}}function Kt(e,t){if(1&e&&(g.Pb(0,"option",14),g.xc(1),g.Ob()),2&e){const e=t.$implicit;g.gc("value",e._id),g.zb(1),g.yc(" ",e.name," ")}}function Rt(e,t){if(1&e){const e=g.Qb();g.Nb(0),g.Pb(1,"div",11),g.Pb(2,"label",12),g.xc(3," Payment Session * : "),g.Ob(),g.Pb(4,"select",13),g.Wb("change",function(t){return g.rc(e),g.ac(2).verifyPaymentSession(t.target)}),g.Lb(5,"option",14),g.vc(6,Kt,2,2,"option",15),g.Ob(),g.Ob(),g.Mb()}if(2&e){const e=g.ac(2);g.zb(4),g.gc("readOnly",e.noEdit)("formControl",e.paymentSessionCtrl),g.zb(2),g.gc("ngForOf",e.paymentSession)}}function Wt(e,t){if(1&e&&g.Lb(0,"app-gp-entry-create-validator",34),2&e){const e=g.ac(3);g.gc("system-type",e.systemType)("payer-name",e.payerName)}}function Vt(e,t){if(1&e&&g.Lb(0,"app-gp-entry-create-validator",35),2&e){const e=g.ac(3);g.gc("system-type",e.systemType)("payer-email",e.payerEmail)}}function Gt(e,t){if(1&e&&g.Lb(0,"app-gp-entry-create-validator",36),2&e){const e=g.ac(3);g.gc("system-type",e.systemType)("payer-phone",e.payerPhone)}}function Qt(e,t){if(1&e&&g.Lb(0,"app-gp-entry-create-validator",37),2&e){const e=g.ac(3);g.gc("system-type",e.systemType)("description",e.description)}}function Bt(e,t){if(1&e&&g.Lb(0,"app-gp-entry-create-validator",38),2&e){const e=g.ac(3);g.gc("system-type",e.systemType)("amount",e.amount)}}const Ut=function(e){return{disabled:e}};function Yt(e,t){if(1&e&&(g.Pb(0,"button",39),g.xc(1," Submit "),g.Ob()),2&e){const e=g.ac(3);g.Bb(g.lc(3,Ut,!e.isFormValid)),g.gc("disabled",!e.isFormValid)}}function Ht(e,t){1&e&&(g.Pb(0,"p"),g.xc(1," Your form is being processed. Please kindly be patient and wait while it completes. "),g.Ob())}function Xt(e,t){if(1&e){const e=g.Qb();g.Nb(0),g.Pb(1,"div",16),g.Pb(2,"form",17),g.Wb("ngSubmit",function(){g.rc(e);const t=g.ac(2);return t.createEntry(t.entryForm.value)}),g.Pb(3,"h3"),g.xc(4," Payment Form "),g.Ob(),g.Pb(5,"div",11),g.Pb(6,"label",18),g.xc(7," Full Name * : "),g.Ob(),g.Lb(8,"input",19),g.vc(9,Wt,1,2,"app-gp-entry-create-validator",20),g.Ob(),g.Pb(10,"div",11),g.Pb(11,"label",21),g.xc(12," Email Address * : "),g.Ob(),g.Lb(13,"input",22),g.vc(14,Vt,1,2,"app-gp-entry-create-validator",23),g.Ob(),g.Pb(15,"div",11),g.Pb(16,"label",24),g.xc(17," Phone Number * : "),g.Ob(),g.Lb(18,"input",25),g.vc(19,Gt,1,2,"app-gp-entry-create-validator",26),g.Ob(),g.Pb(20,"div",11),g.Pb(21,"label",27),g.xc(22," Description of Payment * : "),g.Ob(),g.Lb(23,"input",28),g.vc(24,Qt,1,2,"app-gp-entry-create-validator",29),g.Ob(),g.Pb(25,"div",11),g.Pb(26,"label",30),g.xc(27," Amount * : "),g.Ob(),g.Lb(28,"input",31),g.vc(29,Bt,1,2,"app-gp-entry-create-validator",32),g.Ob(),g.vc(30,Yt,2,5,"button",33),g.vc(31,Ht,2,0,"p",5),g.Ob(),g.Ob(),g.Mb()}if(2&e){const e=g.ac(2);g.zb(2),g.gc("formGroup",e.entryForm),g.zb(7),g.gc("ngIf",e.payerName),g.zb(5),g.gc("ngIf",e.payerEmail),g.zb(5),g.gc("ngIf",e.payerPhone),g.zb(5),g.gc("ngIf",e.description),g.zb(5),g.gc("ngIf",e.amount),g.zb(1),g.gc("ngIf",!e.isFormProcessing),g.zb(1),g.gc("ngIf",e.isFormSubmitted)}}function Jt(e,t){if(1&e&&(g.Nb(0),g.vc(1,Rt,7,3,"ng-container",5),g.vc(2,Xt,32,8,"ng-container",5),g.Mb()),2&e){const e=g.ac();g.zb(1),g.gc("ngIf",null!=e.paymentSession&&(null==e.paymentSession?null:e.paymentSession.length)>0),g.zb(1),g.gc("ngIf",e.entryForm)}}let Zt=(()=>{class e{constructor(e,t,n,i,r,a){this.route=e,this.router=t,this.ns=n,this.ems=i,this.gps=r,this.gpfs=a,this.isError=!1,this.isFormSubmitted=!1,this.isFormProcessing=!1,this.submission=!1,this.isLoading=!1,this.paymentSessionCtrl=new s.d}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.create.systemType,this.title=e.create.title,this.view=e.create.view,this.viewWord=e.create.viewWord,this.link=e.create.link,this.$link=e.create.$link,this.systemGuideline=e.create.systemGuideline,this.paymentRule=e.create.paymentRule,this.gps.$systemType=this.systemType,this.gps.$sa=this.$link,this.route.paramMap.pipe(Object(K.a)(e=>{let t=e.get("payment");return this.pslug=t,this.isLoading=!0,this.gps.addEntry(t)})).subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):1==e.permitted&&null!=e.$data&&null!=e.$data.status?(this.isLoading=!1,this.router.navigate(["/general-payment",this.link,"entry","detail",e.$data._id])):1==e.permitted&&(this.isLoading=!1,this.paymentSession=e.$data.payment_session,this.paymentType=e.$data.payment_type)})}verifyPaymentSession(e){if(""==e.value)return!1;if(e.value==this.prev_psession)return!1;this.prev_psession=e.value;let t={payment_type:this.paymentType,payment_session:e.value};this.isLoading=!0,this.gps.checkPayment(this.pslug,t).subscribe(e=>{let t=e.$data;null!=t.slug?(this.isLoading=!1,this.router.navigate(["general-payment","t",this.pslug,"entry",t.slug,"detail"])):(this.isLoading=!1,this.entry=t,this.entryForm=this.gpfs.$entryForm(),this.entryForm.patchValue({description:t.description,amount:t.amount,payment_type:t.payment_type,payment_session:t.payment_session}))})}createEntry(e){e.amount=100*this.entry.amount,e.email=e.payerEmail,e.callback_url=`https://volunux.github.io/Student-Support-and-Thesis-Management-System/general-payment/t/${this.pslug}/validation`,e.metadata={full_name:e.payerName,email_address:e.payerEmail,phone_number:e.payerPhone,payment_type:e.payment_type,payment_session:e.payment_session},this.submission=!0,this.isFormSubmitted=!0,this.error=null,this.isError=!1,this.isFormProcessing=!0,this.gps.$initializePayment(e).subscribe(e=>{if(null==e)this.isFormSubmitted=!1,this.isFormProcessing=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification("Network error has occured. Payment is only a possiblity when there is Internet connection.");else if(null!=e&&1==e.created)return this.isLoading=!0,this.isFormSubmitted=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is successful and ${this.systemType} is added.`),console.log(e.$data),location.href=e.$data.data.authorization_url})}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}removeNotification(){this.ns.removeNotification()}get payerName(){return this.entryForm.get("payerName")}get payerEmail(){return this.entryForm.get("payerEmail")}get payerPhone(){return this.entryForm.get("payerPhone")}get description(){return this.entryForm.get("description")}get amt(){return this.entryForm.get("amt")}get isFormValid(){return this.entryForm.valid}}return e.\u0275fac=function(t){return new(t||e)(g.Kb(l.a),g.Kb(l.e),g.Kb(te.a),g.Kb(d.a),g.Kb($),g.Kb(ct))},e.\u0275cmp=g.Eb({type:e,selectors:[["app-gp-entry-create"]],features:[g.yb([te.a,d.a])],decls:9,vars:8,consts:[["id","general-payment"],[3,"view-description","system-type",4,"ngIf"],[3,"view","system-guideline",4,"ngIf"],[3,"error",4,"ngIf"],[3,"notified","message","finished",4,"ngIf"],[4,"ngIf"],[3,"is-loading"],[3,"view-description","system-type"],[3,"view","system-guideline"],[3,"error"],[3,"notified","message","finished"],[1,"form-group"],["for","paymentSession",1,"form-label","bold"],["name","paymentSession","id","paymentSession","required","required",1,"form-control",3,"readOnly","formControl","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["id","gp-form"],["method","post","autocomplete","off","enctype","application/x-www-form-urlencoded",3,"formGroup","ngSubmit"],["for","payer-name",1,"form-label","bold"],["type","text","id","payer-name","name","payerName","placeholder","David Muller","formControlName","payerName","autocomplete","new-payerName",1,"form-control"],[3,"system-type","payer-name",4,"ngIf"],["for","payer-email",1,"form-label","bold"],["type","text","id","payer-email","name","payerEmail","placeholder","david@example.com","formControlName","payerEmail","autocomplete","new-payerEmail",1,"form-control"],[3,"system-type","payer-email",4,"ngIf"],["for","payer-phone",1,"form-label","bold"],["type","text","id","payer-phone","name","payerPhone","placeholder","09022035587 or +2349022035587","formControlName","payerPhone","autocomplete","new-payerPhone",1,"form-control"],[3,"system-type","payer-phone",4,"ngIf"],["for","description",1,"form-label","bold"],["type","text","id","description","name","description","readonly","readonly","value","Departmental Fee Payment","formControlName","description","autocomplete","new-description",1,"form-control"],[3,"system-type","description",4,"ngIf"],["for","amount",1,"form-label","bold"],["type","text","id","amount","name","amount","readonly","readonly","formControlName","amount","autocomplete","new-amount",1,"form-control"],[3,"system-type","amount",4,"ngIf"],["type","submit","class","btn-submit",3,"class","disabled",4,"ngIf"],[3,"system-type","payer-name"],[3,"system-type","payer-email"],[3,"system-type","payer-phone"],[3,"system-type","description"],[3,"system-type","amount"],["type","submit",1,"btn-submit",3,"disabled"]],template:function(e,t){1&e&&(g.Pb(0,"div",0),g.Pb(1,"h2"),g.xc(2),g.Ob(),g.vc(3,St,1,2,"app-view-description",1),g.vc(4,At,1,2,"app-guidelines",2),g.vc(5,qt,1,1,"app-resource-unavailable",3),g.vc(6,Dt,1,2,"app-notification-screen",4),g.vc(7,Jt,3,2,"ng-container",5),g.Ob(),g.Lb(8,"app-loading-menu",6)),2&e&&(g.gc("@fadeAnimation",void 0),g.zb(2),g.yc(" ",t.title," "),g.zb(1),g.gc("ngIf",t.view),g.zb(1),g.gc("ngIf",t.systemGuideline),g.zb(1),g.gc("ngIf",t.error),g.zb(1),g.gc("ngIf",t.notificationAvailable),g.zb(1),g.gc("ngIf",!t.isLoading),g.zb(1),g.gc("is-loading",t.isLoading))},directives:[i.l,w.a,T.a,_.a,ie.a,s.p,s.o,s.k,s.e,s.m,s.r,i.k,s.s,s.l,s.h,s.b,s.f,Ft],styles:[""],data:{animation:[p.a]}}),e})();var en=n("1B5t");function tn(e,t){if(1&e&&(g.Pb(0,"h2"),g.xc(1),g.Ob()),2&e){const e=g.ac();g.zb(1),g.yc(" ",e.title," ")}}function nn(e,t){if(1&e&&g.Lb(0,"app-view-description",7),2&e){const e=g.ac();g.gc("system-type",e.systemType)("view-type",e.view)}}function sn(e,t){if(1&e){const e=g.Qb();g.Pb(0,"app-notification-screen",8),g.Wb("finished",function(){return g.rc(e),g.ac().removeNotification()}),g.Ob()}if(2&e){const e=g.ac();g.gc("notified",e.notificationAvailable)("message",e.notificationMessage)}}function rn(e,t){if(1&e&&g.Lb(0,"app-resource-unavailable",9),2&e){const e=g.ac();g.gc("error",e.error)}}function an(e,t){if(1&e&&g.Lb(0,"app-delete-all-entry",13),2&e){const e=g.ac(3);g.gc("system-type",e.systemType)}}function cn(e,t){if(1&e){const e=g.Qb();g.Pb(0,"button",14),g.Wb("click",function(){return g.rc(e),g.ac(3).deleteAllEntry()}),g.xc(1," Confirm "),g.Ob()}}function on(e,t){1&e&&(g.Pb(0,"p"),g.xc(1," Your form is being processed. Please kindly be patient and wait while it completes. "),g.Ob())}function ln(e,t){if(1&e&&(g.Nb(0),g.vc(1,an,1,1,"app-delete-all-entry",11),g.vc(2,cn,2,0,"button",12),g.vc(3,on,2,0,"p",1),g.Mb()),2&e){const e=g.ac(2);g.zb(1),g.gc("ngIf",e.systemType),g.zb(1),g.gc("ngIf",!e.isFormProcessing),g.zb(1),g.gc("ngIf",e.isFormSubmitted)}}function bn(e,t){if(1&e&&(g.Pb(0,"div",10),g.vc(1,ln,4,3,"ng-container",1),g.Ob()),2&e){const e=g.ac();g.gc("@fadeAnimation",void 0),g.zb(1),g.gc("ngIf",!e.isLoading)}}let un=(()=>{class e{constructor(e,t,n,i,s){this.route=e,this.router=t,this.gps=n,this.ems=i,this.ns=s,this.isError=!1,this.isFormSubmitted=!1,this.isFormProcessing=!1,this.canDelete=!1,this.isLoading=!1}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.deleteAll.systemType,this.viewWord=e.deleteAll.viewWord,this.title=e.deleteAll.title,this.view=e.deleteAll.view,this.link=e.deleteAll.link,this.route.paramMap.pipe(Object(K.a)(e=>{let t=e.get("payment");return this.pslug=t,this.isLoading=!0,this.gps.deleteAllEntry(t)})).subscribe(e=>{null==e?(this.isLoading=!1,this.canDelete=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&e.length>0&&(this.isLoading=!1,this.canDelete=!0)})}ngOnDestroy(){clearTimeout(this.entryChangesT)}deleteAllEntry(){if(!confirm("Are you sure you want to proceed with this action?"))return!1;this.gps.$systemType=this.systemType,this.isFormSubmitted=!0,this.error=null,this.isError=!1,this.isFormProcessing=!0,this.gps.deleteAllEntry$(this.pslug).subscribe(e=>{if(null==e)return this.isFormSubmitted=!1,this.isFormProcessing=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is unsuccessful and all ${this.systemType} entry is not deleted.`),this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message);this.isLoading=!0,this.isFormSubmitted=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is successful and all ${this.systemType} entry is deleted.`),this.$entryChanges({})})}$entryChanges(e){this.entryChangesT=setTimeout(()=>this.router.navigate(["system","general-payment"]),5e3)}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}removeNotification(){this.ns.removeNotification()}}return e.\u0275fac=function(t){return new(t||e)(g.Kb(l.a),g.Kb(l.e),g.Kb($),g.Kb(d.a),g.Kb(te.a))},e.\u0275cmp=g.Eb({type:e,selectors:[["app-gp-entry-delete-all"]],features:[g.yb([te.a,d.a])],decls:7,vars:6,consts:[["id","entry-delete-all"],[4,"ngIf"],[3,"system-type","view-type",4,"ngIf"],[3,"notified","message","finished",4,"ngIf"],[3,"error",4,"ngIf"],["id","entry-detail",4,"ngIf"],[3,"is-loading"],[3,"system-type","view-type"],[3,"notified","message","finished"],[3,"error"],["id","entry-detail"],[3,"system-type",4,"ngIf"],["class","btn-submit","type","submit",3,"click",4,"ngIf"],[3,"system-type"],["type","submit",1,"btn-submit",3,"click"]],template:function(e,t){1&e&&(g.Pb(0,"div",0),g.vc(1,tn,2,1,"h2",1),g.vc(2,nn,1,2,"app-view-description",2),g.vc(3,sn,1,2,"app-notification-screen",3),g.vc(4,rn,1,1,"app-resource-unavailable",4),g.vc(5,bn,2,2,"div",5),g.Ob(),g.Lb(6,"app-loading-menu",6)),2&e&&(g.zb(1),g.gc("ngIf",t.title),g.zb(1),g.gc("ngIf",t.view),g.zb(1),g.gc("ngIf",t.notificationAvailable),g.zb(1),g.gc("ngIf",t.error),g.zb(1),g.gc("ngIf",t.canDelete),g.zb(1),g.gc("is-loading",t.isLoading))},directives:[i.l,w.a,T.a,ie.a,_.a,en.a],styles:[""],data:{animation:[p.a]}}),e})();function yn(e,t){if(1&e&&(g.Pb(0,"h2"),g.xc(1),g.Ob()),2&e){const e=g.ac();g.zb(1),g.yc(" ",e.title," ")}}function pn(e,t){if(1&e&&g.Lb(0,"app-view-description",5),2&e){const e=g.ac();g.gc("view-type",e.view)}}function gn(e,t){if(1&e&&g.Lb(0,"app-resource-unavailable",6),2&e){const e=g.ac();g.gc("error",e.error)}}let hn=(()=>{class e{constructor(e,t,n,i,s){this.router=e,this.ns=t,this.ems=n,this.route=i,this.gps=s,this.isError=!1,this.isLoading=!1}ngOnInit(){this.gps.$systemType=this.systemType,this.gps.$sa=this.$link,this.route.queryParams.pipe(Object(K.a)(e=>{let t=e.reference;return this.pslug=this.route.snapshot.paramMap.get("payment"),this.isLoading=!0,this.gps.$verifyPayment(t)})).subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&1==e.verified&&(this.isLoading=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is successful and ${this.systemType} is added.`),this.entryChanges(e.$data))})}ngOnDestroy(){clearTimeout(this.entryChangesT)}entryChanges(e){this.entryChangesT=setTimeout(()=>this.router.navigate(e&&e._id?["general-payment","t",this.pslug,"entry",e.slug,"detail"]:["general-payment","t",this.pslug],{replaceUrl:!0}),1e3)}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}removeNotification(){this.ns.removeNotification()}}return e.\u0275fac=function(t){return new(t||e)(g.Kb(l.e),g.Kb(te.a),g.Kb(d.a),g.Kb(l.a),g.Kb($))},e.\u0275cmp=g.Eb({type:e,selectors:[["app-gp-entry-verification"]],features:[g.yb([te.a,d.a])],decls:7,vars:5,consts:[["id","general-payment"],[4,"ngIf"],[3,"view-type",4,"ngIf"],[3,"error",4,"ngIf"],[3,"is-loading"],[3,"view-type"],[3,"error"]],template:function(e,t){1&e&&(g.Pb(0,"div",0),g.vc(1,yn,2,1,"h2",1),g.Pb(2,"p"),g.xc(3," Kindly be patient while the payment is being processed. "),g.Ob(),g.vc(4,pn,1,1,"app-view-description",2),g.vc(5,gn,1,1,"app-resource-unavailable",3),g.Ob(),g.Lb(6,"app-loading-menu",4)),2&e&&(g.gc("@fadeAnimation",void 0),g.zb(1),g.gc("ngIf",t.title),g.zb(3),g.gc("ngIf",t.view),g.zb(1),g.gc("ngIf",t.isError),g.zb(1),g.gc("is-loading",t.isLoading))},directives:[i.l,w.a,T.a,_.a],styles:[""],data:{animation:[p.a]}}),e})();function dn(e,t){if(1&e&&(g.Pb(0,"h2"),g.xc(1),g.Ob()),2&e){const e=g.ac();g.zb(1),g.yc(" ",e.title," ")}}function fn(e,t){if(1&e&&g.Lb(0,"app-view-description",5),2&e){const e=g.ac();g.gc("view-type",e.view)("system-type",e.systemType)}}function mn(e,t){if(1&e&&g.Lb(0,"app-resource-unavailable",6),2&e){const e=g.ac();g.gc("error",e.error)}}function vn(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(4);g.zb(1),g.yc(" Payment Reference of ",e.systemType," should be provided and cannot be empty ")}}function Pn(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(4);g.zb(1),g.yc(" Payment Reference of ",e.systemType," cannot be less than 4 characters in length ")}}function On(e,t){if(1&e&&(g.Pb(0,"li"),g.xc(1),g.Ob()),2&e){const e=g.ac(4);g.zb(1),g.yc(" Payment Reference of ",e.systemType," cannot be greater than 30 characters in length ")}}function zn(e,t){if(1&e&&(g.Pb(0,"div",13),g.Pb(1,"ul"),g.vc(2,vn,2,1,"li",1),g.vc(3,Pn,2,1,"li",1),g.vc(4,On,2,1,"li",1),g.Ob(),g.Ob()),2&e){const e=g.ac(3);g.gc("@fadeAnimation",void 0),g.zb(2),g.gc("ngIf",null==e.payment_reference.errors?null:e.payment_reference.errors.required),g.zb(1),g.gc("ngIf",(null==e.payment_reference.errors?null:e.payment_reference.errors.required)||(null==e.payment_reference.errors?null:e.payment_reference.errors.minlength)),g.zb(1),g.gc("ngIf",(null==e.payment_reference.errors?null:e.payment_reference.errors.required)||(null==e.payment_reference.errors?null:e.payment_reference.errors.maxlength))}}function In(e,t){if(1&e&&(g.Nb(0),g.vc(1,zn,5,4,"div",12),g.Mb()),2&e){const e=g.ac(2);g.zb(1),g.gc("ngIf",e.payment_reference.invalid&&(e.payment_reference.touched||e.payment_reference.dirty))}}const En=function(e){return{disabled:e}};function $n(e,t){if(1&e&&(g.Pb(0,"button",14),g.xc(1," Verify Payment "),g.Ob()),2&e){const e=g.ac(2);g.Bb(g.lc(3,En,!e.isFormValid)),g.gc("disabled",!e.isFormValid)}}function xn(e,t){1&e&&(g.Pb(0,"p"),g.xc(1," Your form is being processed. Please kindly be patient and wait while it completes. "),g.Ob())}function Ln(e,t){if(1&e){const e=g.Qb();g.Pb(0,"div"),g.Pb(1,"form",7),g.Wb("ngSubmit",function(){g.rc(e);const t=g.ac();return t.verifyPayment(t.entryForm.value)}),g.Pb(2,"div",8),g.Pb(3,"label",9),g.xc(4," Payment Reference * : "),g.Ob(),g.Lb(5,"input",10),g.vc(6,In,2,1,"ng-container",1),g.Ob(),g.vc(7,$n,2,5,"button",11),g.vc(8,xn,2,0,"p",1),g.Ob(),g.Ob()}if(2&e){const e=g.ac();g.zb(1),g.gc("formGroup",e.entryForm),g.zb(5),g.gc("ngIf",e.payment_reference),g.zb(1),g.gc("ngIf",!e.isFormProcessing),g.zb(1),g.gc("ngIf",e.isFormSubmitted)}}const wn=function(e,t,n,i){return{pending:e,success:t,failed:n,refunded:i}};function Tn(e,t){if(1&e&&(g.Pb(0,"div"),g.Pb(1,"div",15),g.Pb(2,"p",16),g.Pb(3,"span",16),g.xc(4," Status : "),g.Ob(),g.Pb(5,"span",17),g.xc(6),g.Ob(),g.Ob(),g.Pb(7,"p",16),g.xc(8),g.Ob(),g.Ob(),g.Ob()),2&e){const e=g.ac();g.zb(5),g.gc("ngClass",g.oc(3,wn,"Pending"==(null==e.entry?null:e.entry.status),"Success"==(null==e.entry?null:e.entry.status),"Failed"==(null==e.entry?null:e.entry.status),"Refunded"==(null==e.entry?null:e.entry.status))),g.zb(1),g.yc(" ",e.entry.status," "),g.zb(2),g.yc(" Payment Type : ",e.entry.payment_type_name," ")}}let _n=(()=>{class e{constructor(e,t,n,i,s){this.router=e,this.route=t,this.gps=n,this.ems=i,this.aus=s,this.entry=null,this.isError=!1,this.isFormSubmitted=!1,this.isFormProcessing=!1,this.isLoading=!1}ngOnInit(){let e=this.route.snapshot.data;this.systemType=e.verify.systemType,this.title=e.verify.title,this.view=e.verify.view,this.viewWord=e.verify.viewWord,this.link=e.verify.link,this.gps.$systemType=this.systemType,this.gps.$sa=e.verify.$link,this.route.paramMap.pipe(Object(K.a)(e=>(this.isLoading=!0,this.gps.getStatus()))).subscribe(e=>{null==e?(this.isLoading=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&(this.isLoading=!1,this.entryForm=new s.g({payment_reference:new s.d("",[s.q.required,s.q.minLength(4),s.q.maxLength(30)])}))})}ngOnDestroy(){clearTimeout(this.entryChangesT)}verifyPayment(e){this.payment_ref_checked!=e.payment_reference&&(this.payment_ref_checked=e.payment_reference,this.entry=null,this.isFormSubmitted=!0,this.error=null,this.isError=!1,this.isFormProcessing=!0,this.gps.confirmStatus(e).subscribe(e=>{null==e?(this.isFormSubmitted=!1,this.isFormProcessing=!1,this.isError=!0,this.error=Object.assign({resource:this.systemType+" Entry"},this.ems.message)):null!=e&&(this.isFormProcessing=!1,this.isFormSubmitted=!1,this.entry=e)}))}get userRole(){return this.aus.userRole}get payment_reference(){return this.entryForm.get("payment_reference")}get isFormValid(){return this.entryForm.valid}}return e.\u0275fac=function(t){return new(t||e)(g.Kb(l.e),g.Kb(l.a),g.Kb($),g.Kb(d.a),g.Kb(x.a))},e.\u0275cmp=g.Eb({type:e,selectors:[["app-gp-entry-receipt"]],features:[g.yb([d.a])],decls:7,vars:7,consts:[["id","general-payment"],[4,"ngIf"],[3,"view-type","system-type",4,"ngIf"],[3,"error",4,"ngIf"],[3,"is-loading"],[3,"view-type","system-type"],[3,"error"],["autocomplete","new-payment-verification",3,"formGroup","ngSubmit"],[1,"form-group"],["for","payment-reference",1,"form-label","bold"],["type","text","id","payment-reference","name","payment_reference","placeholder","abczyxxyzaslkj","formControlName","payment_reference","autocomplete","new-payment_reference",1,"form-control"],["type","submit","class","btn-submit",3,"class","disabled",4,"ngIf"],["class","validation-error",4,"ngIf"],[1,"validation-error"],["type","submit",1,"btn-submit",3,"disabled"],[1,"payment-status"],[1,""],[3,"ngClass"]],template:function(e,t){1&e&&(g.Pb(0,"div",0),g.vc(1,dn,2,1,"h2",1),g.vc(2,fn,1,2,"app-view-description",2),g.vc(3,mn,1,1,"app-resource-unavailable",3),g.vc(4,Ln,9,4,"div",1),g.vc(5,Tn,9,8,"div",1),g.Ob(),g.Lb(6,"app-loading-menu",4)),2&e&&(g.gc("@fadeAnimation",void 0),g.zb(1),g.gc("ngIf",t.title),g.zb(1),g.gc("ngIf",t.view),g.zb(1),g.gc("ngIf",t.isError),g.zb(1),g.gc("ngIf",t.entryForm),g.zb(1),g.gc("ngIf",null!=t.entry),g.zb(1),g.gc("is-loading",t.isLoading))},directives:[i.l,w.a,T.a,_.a,s.s,s.l,s.h,s.b,s.k,s.f,i.j],styles:[".payment-status[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:18px;font-family:Arial}.pending[_ngcontent-%COMP%]{color:#00f}.failed[_ngcontent-%COMP%]{color:red}.success[_ngcontent-%COMP%]{color:green}.refunded[_ngcontent-%COMP%]{color:purple}"],data:{animation:[p.a]}}),e})(),Nn={systemType:"General Payment",title:"General Payment",view:"gp",viewWord:"Payment",link:"payment",$link:"general-payment",systemGuideline:"payment",base:"payment"};const kn={dashboard:Object.assign({},Nn),create:Object.assign(Object.assign({},Nn),{title:`Make ${Nn.systemType} Payment`,paymentRule:{amount:"1000",description:"Departmental Fee Payment",type:"department",callback:""}}),detail:Object.assign(Object.assign({},Nn),{title:Nn.systemType+" Entry"}),entries:Object.assign(Object.assign({},Nn),{title:Nn.systemType+" Entries",searchFilters:{paymentReference:"Payment Reference",department:"Department",status:"Status"}}),validation:Object.assign(Object.assign({},Nn),{title:"Verifying "+Nn.systemType}),verify:Object.assign(Object.assign({},Nn),{title:`Verify ${Nn.systemType} Status`}),deleteAll:Object.assign(Object.assign({},Nn),{title:Nn.systemType+" Entries : Delete All"})},Mn=[{path:"",component:h,canActivate:[b.a],canLoad:[b.a],children:[{path:"",canActivateChild:[b.a],canLoad:[b.a],children:[{path:"",component:D,data:{dashboard:kn.dashboard}},{path:"t/:payment",component:J,data:{dashboard:kn.dashboard}},{path:"t/:payment/entries",component:_e,data:{entries:kn.entries}},{path:"t/:payment/entry/:entry/detail",component:st,data:{detail:kn.detail}},{path:"t/:payment/entry/create",component:Zt,canActivate:[u.a],data:{create:kn.detail}},{path:"t/:payment/validation",component:hn,data:{validation:kn.validation}},{path:"verify-status",component:_n,data:{verify:kn.verify}},{path:"entry/delete/all",component:un,canActivate:[y.a],data:{deleteAll:kn.deleteAll}}]}]}];let Cn=(()=>{class e{}return e.\u0275mod=g.Ib({type:e}),e.\u0275inj=g.Hb({factory:function(t){return new(t||e)},imports:[[l.g.forChild(Mn)],l.g]}),e})(),jn=(()=>{class e{}return e.\u0275mod=g.Ib({type:e}),e.\u0275inj=g.Hb({factory:function(t){return new(t||e)},providers:[$,ct],imports:[[i.b,Cn,s.n,r.a,c.a,a.a,o.a]]}),e})()}}]);